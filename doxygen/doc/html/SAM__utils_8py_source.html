<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icub-client: /home/travis/build/robotology/icub-hri/src/modules/SAM/SAM_Core/SAM_utils.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icub-client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ddb4d7e95cc2d6c8e1ade10a20d7247d.html">modules</a></li><li class="navelem"><a class="el" href="dir_c58165d7c2f326e33de0f6c7df0ba009.html">SAM</a></li><li class="navelem"><a class="el" href="dir_453316a4ffa88d6295915dc99dbb1a4e.html">SAM_Core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SAM_utils.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SAM__utils_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespaceSAM_1_1SAM__Core_1_1SAM__utils.html">    1</a></span>&#160;<span class="comment"># &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># The University of Sheffield</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># WYSIWYD Project</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># SAMpy class for various methods related to processing data</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># Created on 26 May 2015</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># @authors: Andreas Damianou, Daniel Camilleri</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"># &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="keyword">import</span> matplotlib</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;matplotlib.use(<span class="stringliteral">&quot;TkAgg&quot;</span>)</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="keyword">from</span> ConfigParser <span class="keyword">import</span> SafeConfigParser</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="keyword">import</span> pickle</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="keyword">import</span> matplotlib.mlab <span class="keyword">as</span> mlab</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">from</span> <a class="code" href="namespaceSAM_1_1SAM__Core.html">SAM.SAM_Core</a> <span class="keyword">import</span> samOptimiser</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">from</span> os <span class="keyword">import</span> listdir</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">from</span> os.path <span class="keyword">import</span> join, isdir</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> threading</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> logging</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="namespaceSAM_1_1SAM__Core_1_1SAM__utils.html#a908d91fede0d299860184c887e66c28c">   25</a></span>&#160;np.set_printoptions(precision=2)</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga7d1d61b09b614680e853bc0be5e10df1">initialiseModels</a>(argv, update, initMode=&#39;training&#39;):</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Initialise SAM Model data structure, training parameters and user parameters.</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="stringliteral">        This method starts by initialising the required Driver from the driver name in argv[3] if it exists</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="stringliteral">        in SAM_Drivers folder. The standard model parameters and the specific user parameters are then initialised</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral">        and the data is read in by the SAMDriver.readData method to complete the model data structure. This method</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral">        then replicates the model data structure for training with multiple models if it is required in the config</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="stringliteral">        file loaded by the Driver.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="stringliteral">            argv_0: dataPath containing the data that is to be trained on.</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="stringliteral">            argv_1: modelPath containing the path of where the model is to be stored.</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="stringliteral">            argv_2: driverName containing the name of the driver class that is to be loaded from SAM_Drivers folder.</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="stringliteral">            update: String having either a value of &#39;update&#39; or &#39;new&#39;. &#39;new&#39; will load the parameters as set in the</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="stringliteral">                    config file of the driver being loaded present in the dataPath directory. This is used to train a</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral">                     new model from scratch. &#39;update&#39; will check for an existing model in the modelPath directory and</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="stringliteral">                     load the parameters from this model if it exists. This is used for retraining a model when new</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="stringliteral">                     data becomes available.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="stringliteral">            initMode: String having either a value of &#39;training&#39; or &#39;interaction&#39;. &#39;training&#39; takes into consideration</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="stringliteral">                      the value of update in loading the parameters. (Used by trainSAMModel.py) &#39;interaction&#39; loads</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="stringliteral">                      the parameters directly from the model if the model exists. (Used by interactionSAMModel.py)</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="stringliteral">            The output is a list of SAMDriver models. The list is of length 1 when the config file requests a single</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="stringliteral">            model or a list of length n+1 for a config file requesting multiple models where n is the number of</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral">            requested models. The number of models either depends on the number of directories present in the dataPath</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="stringliteral">            or from the length of textLabels returned from the SAMDriver.readData method.</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga7d1d61b09b614680e853bc0be5e10df1">   59</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">from</span> <a class="code" href="namespaceSAM_1_1SAM__Core.html">SAM.SAM_Core</a> <span class="keyword">import</span> SAMDriver <span class="keyword">as</span> Driver</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    dataPath = argv[0]</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    modelPath = argv[1]</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    driverName = argv[2]</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    logging.info(argv)</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    stringCommand = <span class="stringliteral">&#39;from SAM.SAM_Drivers import &#39;</span> + driverName + <span class="stringliteral">&#39; as Driver&#39;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    logging.info(stringCommand)</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    exec stringCommand</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    mySAMpy = Driver()</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    mode = update</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    trainName = dataPath.split(<span class="stringliteral">&#39;/&#39;</span>)[-1]</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment"># participantList is extracted from number of subdirectories of dataPath</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    participantList = [f <span class="keywordflow">for</span> f <span class="keywordflow">in</span> listdir(dataPath) <span class="keywordflow">if</span> isdir(join(dataPath, f))]</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    off = 17</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    logging.info(<span class="stringliteral">&#39;-------------------&#39;</span>)</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    logging.info(<span class="stringliteral">&#39;Training Settings:&#39;</span>)</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    logging.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    logging.info(<span class="stringliteral">&#39;Init mode: &#39;</span>.ljust(off) + str(initMode))</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    logging.info(<span class="stringliteral">&#39;Data Path: &#39;</span>.ljust(off) + str(dataPath))</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    logging.info(<span class="stringliteral">&#39;Model Path: &#39;</span>.ljust(off) + str(modelPath))</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    logging.info(<span class="stringliteral">&#39;Participants: &#39;</span>.ljust(off) + str(participantList))</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    logging.info(<span class="stringliteral">&#39;Model Root Name: &#39;</span>.ljust(off) + str(trainName))</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    logging.info(<span class="stringliteral">&#39;Training Mode:&#39;</span>.ljust(off) + str(mode))</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    logging.info(<span class="stringliteral">&#39;Driver:&#39;</span>.ljust(off) + str(driverName))</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    logging.info(<span class="stringliteral">&#39;-------------------&#39;</span>)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    logging.info(<span class="stringliteral">&#39;Loading Parameters...&#39;</span>)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    logging.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    modeConfig = <span class="stringliteral">&#39;&#39;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    found = <span class="stringliteral">&#39;&#39;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        parser = SafeConfigParser()</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        found = parser.read(dataPath + <span class="stringliteral">&quot;/config.ini&quot;</span>)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;update_mode&#39;</span>):</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            modeConfig = parser.get(trainName, <span class="stringliteral">&#39;update_mode&#39;</span>)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            modeConfig = <span class="stringliteral">&#39;update&#39;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        logging.info(modeConfig)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">except</span> IOError:</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">pass</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    defaultParamsList = [<span class="stringliteral">&#39;experiment_number&#39;</span>, <span class="stringliteral">&#39;model_type&#39;</span>, <span class="stringliteral">&#39;model_num_inducing&#39;</span>,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                         <span class="stringliteral">&#39;model_num_iterations&#39;</span>, <span class="stringliteral">&#39;model_init_iterations&#39;</span>, <span class="stringliteral">&#39;verbose&#39;</span>,</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                         <span class="stringliteral">&#39;Quser&#39;</span>, <span class="stringliteral">&#39;kernelString&#39;</span>, <span class="stringliteral">&#39;ratioData&#39;</span>, <span class="stringliteral">&#39;update_mode&#39;</span>, <span class="stringliteral">&#39;model_mode&#39;</span>,</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                         <span class="stringliteral">&#39;temporalModelWindowSize&#39;</span>, <span class="stringliteral">&#39;optimiseRecall&#39;</span>, <span class="stringliteral">&#39;classificationDict&#39;</span>,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                         <span class="stringliteral">&#39;useMaxDistance&#39;</span>, <span class="stringliteral">&#39;calibrateUnknown&#39;</span>]</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    mySAMpy.experiment_number = <span class="keywordtype">None</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    mySAMpy.model_type = <span class="keywordtype">None</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    mySAMpy.kernelString = <span class="keywordtype">None</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    mySAMpy.fname = <span class="keywordtype">None</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    mySAMpy.ratioData = <span class="keywordtype">None</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordflow">if</span> initMode == <span class="stringliteral">&#39;training&#39;</span> <span class="keywordflow">and</span> (mode == <span class="stringliteral">&#39;new&#39;</span> <span class="keywordflow">or</span> modeConfig == <span class="stringliteral">&#39;new&#39;</span> <span class="keywordflow">or</span> <span class="stringliteral">&#39;exp&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> modelPath):</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        logging.info(<span class="stringliteral">&#39;Loading training parameters from:&#39;</span> + str(dataPath) + <span class="stringliteral">&quot;/config.ini&quot;</span>)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            default = <span class="keyword">False</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            parser = SafeConfigParser()</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            parser.optionxform = str</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            found = parser.read(dataPath + <span class="stringliteral">&quot;/config.ini&quot;</span>)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            mySAMpy.experiment_number = <span class="stringliteral">&#39;exp&#39;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;model_type&#39;</span>):</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                mySAMpy.model_type = parser.get(trainName, <span class="stringliteral">&#39;model_type&#39;</span>)</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                mySAMpy.model_type = <span class="stringliteral">&#39;mrd&#39;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;model_num_inducing&#39;</span>):</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                mySAMpy.model_num_inducing = int(parser.get(trainName, <span class="stringliteral">&#39;model_num_inducing&#39;</span>))</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                mySAMpy.model_num_inducing = 30</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;model_num_iterations&#39;</span>):</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                mySAMpy.model_num_iterations = int(parser.get(trainName, <span class="stringliteral">&#39;model_num_iterations&#39;</span>))</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                mySAMpy.model_num_iterations = 700</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;model_init_iterations&#39;</span>):</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                mySAMpy.model_init_iterations = int(parser.get(trainName, <span class="stringliteral">&#39;model_init_iterations&#39;</span>))</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                mySAMpy.model_init_iterations = 2000</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;verbose&#39;</span>):</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                mySAMpy.verbose = parser.get(trainName, <span class="stringliteral">&#39;verbose&#39;</span>) == <span class="stringliteral">&#39;True&#39;</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                mySAMpy.verbose = <span class="keyword">False</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;optimiseRecall&#39;</span>):</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                mySAMpy.optimiseRecall = int(parser.get(trainName, <span class="stringliteral">&#39;optimiseRecall&#39;</span>))</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                mySAMpy.optimiseRecall = 200</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;useMaxDistance&#39;</span>):</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                mySAMpy.useMaxDistance = parser.get(trainName, <span class="stringliteral">&#39;useMaxDistance&#39;</span>) == <span class="stringliteral">&#39;True&#39;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                mySAMpy.useMaxDistance = <span class="keyword">False</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;calibrateUnknown&#39;</span>):</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                mySAMpy.calibrateUnknown = parser.get(trainName, <span class="stringliteral">&#39;calibrateUnknown&#39;</span>) == <span class="stringliteral">&#39;True&#39;</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                mySAMpy.calibrateUnknown = <span class="keyword">False</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;model_mode&#39;</span>):</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                mySAMpy.model_mode = parser.get(trainName, <span class="stringliteral">&#39;model_mode&#39;</span>)</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                <span class="keywordflow">if</span> mySAMpy.model_mode == <span class="stringliteral">&#39;temporal&#39;</span> <span class="keywordflow">and</span> parser.has_option(trainName, <span class="stringliteral">&#39;temporalModelWindowSize&#39;</span>):</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                        mySAMpy.temporalWindowSize = int(parser.get(trainName, <span class="stringliteral">&#39;temporalModelWindowSize&#39;</span>))</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                    temporalFlag = <span class="keyword">True</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                mySAMpy.model_mode = <span class="stringliteral">&#39;single&#39;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;Quser&#39;</span>):</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                mySAMpy.Quser = int(parser.get(trainName, <span class="stringliteral">&#39;Quser&#39;</span>))</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                mySAMpy.Quser = 2</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;kernelString&#39;</span>):</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                mySAMpy.kernelString = parser.get(trainName, <span class="stringliteral">&#39;kernelString&#39;</span>)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                mySAMpy.kernelString = <span class="stringliteral">&quot;GPy.kern.RBF(Q, ARD=False) + GPy.kern.Bias(Q) + GPy.kern.White(Q)&quot;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> parser.has_option(trainName, <span class="stringliteral">&#39;ratioData&#39;</span>):</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                mySAMpy.ratioData = int(parser.get(trainName, <span class="stringliteral">&#39;ratioData&#39;</span>))</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                default = <span class="keyword">True</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                mySAMpy.ratioData = 50</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="keywordflow">if</span> default:</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                logging.info(<span class="stringliteral">&#39;Default settings applied&#39;</span>)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            mySAMpy.paramsDict = dict()</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            mySAMpy.loadParameters(parser, trainName)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keywordflow">except</span> IOError:</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            logging.warning(<span class="stringliteral">&#39;IO Exception reading &#39;</span>, found)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            <span class="keywordflow">pass</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        logging.info(<span class="stringliteral">&#39;Loading parameters from: \n \t&#39;</span> + str(modelPath))</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            parser = SafeConfigParser()</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            parser.optionxform = str</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            found = parser.read(dataPath + <span class="stringliteral">&quot;/config.ini&quot;</span>)</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="comment"># load parameters from config file</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            mySAMpy.experiment_number = modelPath.split(<span class="stringliteral">&#39;__&#39;</span>)[-1]</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            modelPickle = pickle.load(open(modelPath+<span class="stringliteral">&#39;.pickle&#39;</span>, <span class="stringliteral">&#39;rb&#39;</span>))</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            mySAMpy.paramsDict = dict()</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            <span class="keywordflow">for</span> j <span class="keywordflow">in</span> parser.options(trainName):</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">if</span> j <span class="keywordflow">not</span> <span class="keywordflow">in</span> defaultParamsList:</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    logging.info(str(j))</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    mySAMpy.paramsDict[j] = modelPickle[j]</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            mySAMpy.ratioData = modelPickle[<span class="stringliteral">&#39;ratioData&#39;</span>]</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            mySAMpy.model_type = modelPickle[<span class="stringliteral">&#39;model_type&#39;</span>]</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            mySAMpy.model_mode = modelPickle[<span class="stringliteral">&#39;model_mode&#39;</span>]</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keywordflow">if</span> mySAMpy.model_mode == <span class="stringliteral">&#39;temporal&#39;</span>:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                mySAMpy.temporalModelWindowSize = modelPickle[<span class="stringliteral">&#39;temporalModelWindowSize&#39;</span>]</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                mySAMpy.model_type = <span class="stringliteral">&#39;mrd&#39;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            mySAMpy.model_num_inducing = modelPickle[<span class="stringliteral">&#39;model_num_inducing&#39;</span>]</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            mySAMpy.model_num_iterations = modelPickle[<span class="stringliteral">&#39;model_num_iterations&#39;</span>]</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            mySAMpy.model_init_iterations = modelPickle[<span class="stringliteral">&#39;model_init_iterations&#39;</span>]</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;            mySAMpy.verbose = modelPickle[<span class="stringliteral">&#39;verbose&#39;</span>]</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            mySAMpy.Quser = modelPickle[<span class="stringliteral">&#39;Quser&#39;</span>]</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            mySAMpy.optimiseRecall = modelPickle[<span class="stringliteral">&#39;optimiseRecall&#39;</span>]</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            mySAMpy.kernelString = modelPickle[<span class="stringliteral">&#39;kernelString&#39;</span>]</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            mySAMpy.calibrated = modelPickle[<span class="stringliteral">&#39;calibrated&#39;</span>]</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="comment"># try loading classification parameters for multiple model implementation</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;            <span class="keywordflow">try</span>:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                mySAMpy.useMaxDistance = modelPickle[<span class="stringliteral">&#39;useMaxDistance&#39;</span>]</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="keywordflow">except</span>:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                logging.warning(<span class="stringliteral">&#39;Failed to load useMaxDistace. Possible reasons: &#39;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                <span class="stringliteral">&#39;Not saved or multiple model implementation&#39;</span>)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            mySAMpy.calibrateUnknown = modelPickle[<span class="stringliteral">&#39;calibrateUnknown&#39;</span>]</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">if</span> mySAMpy.calibrateUnknown:</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                mySAMpy.classificationDict = modelPickle[<span class="stringliteral">&#39;classificationDict&#39;</span>]</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="keywordflow">except</span> IOError:</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            logging.warning(<span class="stringliteral">&#39;IO Exception reading &#39;</span>, found)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="keywordflow">pass</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> <span class="stringliteral">&#39;exp&#39;</span> <span class="keywordflow">in</span> modelPath <span class="keywordflow">or</span> <span class="stringliteral">&#39;best&#39;</span> <span class="keywordflow">in</span> modelPath <span class="keywordflow">or</span> <span class="stringliteral">&#39;backup&#39;</span> <span class="keywordflow">in</span> modelPath:</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;         fnameProto = <span class="stringliteral">&#39;/&#39;</span>.join(modelPath.split(<span class="stringliteral">&#39;/&#39;</span>)[:-1]) + <span class="stringliteral">&#39;/&#39;</span> + dataPath.split(<span class="stringliteral">&#39;/&#39;</span>)[-1] + <span class="stringliteral">&#39;__&#39;</span> + driverName + \</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                             <span class="stringliteral">&#39;__&#39;</span> + mySAMpy.model_type + <span class="stringliteral">&#39;__&#39;</span> + str(mySAMpy.experiment_number)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        fnameProto = modelPath + dataPath.split(<span class="stringliteral">&#39;/&#39;</span>)[-1] + <span class="stringliteral">&#39;__&#39;</span> + driverName + <span class="stringliteral">&#39;__&#39;</span> + mySAMpy.model_type + \</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                             <span class="stringliteral">&#39;__&#39;</span> + str(mySAMpy.experiment_number)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    logging.info(<span class="stringliteral">&#39;Full model name: &#39;</span> + str(fnameProto))</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    logging.info(<span class="stringliteral">&#39;-------------------&#39;</span>)</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    logging.info(<span class="stringliteral">&#39;&#39;</span>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    mySAMpy.save_model = <span class="keyword">False</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    mySAMpy.economy_save = <span class="keyword">True</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    mySAMpy.visualise_output = <span class="keyword">False</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="comment"># test_mode = True</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    mySAMpy.readData(dataPath, participantList)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">if</span> mySAMpy.model_mode != <span class="stringliteral">&#39;temporal&#39;</span>:</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <span class="comment"># get list of labels</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        mySAMpy.textLabels = list(set(mySAMpy.L))</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment"># convert L from list of strings to array of indices</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        mySAMpy.L = np.asarray([mySAMpy.textLabels.index(i) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> mySAMpy.L])[:, <span class="keywordtype">None</span>]</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        mySAMpy.textLabels = mySAMpy.textLabels</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        mySAMpy.X, mySAMpy.Y = <a class="code" href="group__icubclient__SAM__utils.html#ga54c327e56dfec748f1c4a150b9180162">transformTimeSeriesToSeq</a>(mySAMpy.Y1, mySAMpy.temporalModelWindowSize)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        mySAMpy.L, mySAMpy.tmp = <a class="code" href="group__icubclient__SAM__utils.html#ga54c327e56dfec748f1c4a150b9180162">transformTimeSeriesToSeq</a>(mySAMpy.U1, mySAMpy.temporalModelWindowSize)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    mm = [mySAMpy]</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="comment"># mm.append(mySAMpy)</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="comment"># mm[0] contains root model</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="comment"># this is the only model in the case of a single model</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="comment"># or contains all info for the rest of the models in case of multiple models</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">#</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> mySAMpy.model_mode == <span class="stringliteral">&#39;single&#39;</span> <span class="keywordflow">or</span> mySAMpy.model_mode == <span class="stringliteral">&#39;temporal&#39;</span>:</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        mm[0].participantList = [<span class="stringliteral">&#39;all&#39;</span>]</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        mm[0].participantList = [<span class="stringliteral">&#39;root&#39;</span>] + mySAMpy.textLabels</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(len(mm[0].participantList)):</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">if</span> mm[0].participantList[k] == <span class="stringliteral">&#39;all&#39;</span>:</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            normaliseData = <span class="keyword">True</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            minData = len(mm[k].L)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            mm[0].fname = fnameProto</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            mm[0].model_type = mySAMpy.model_type</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            Ntr = int(mySAMpy.ratioData * minData / 100)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;            <span class="keywordflow">if</span> k &gt; 0:</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                mm.append(Driver())</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                <span class="comment"># extract subset of data corresponding to this model</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                inds = [i <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(mm[0].Y[<span class="stringliteral">&#39;L&#39;</span>])) <span class="keywordflow">if</span> mm[0].Y[<span class="stringliteral">&#39;L&#39;</span>][i] == k - 1]</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                mm[k].Y = mm[0].Y[<span class="stringliteral">&#39;Y&#39;</span>][inds]</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                mm[k].L = mm[0].Y[<span class="stringliteral">&#39;L&#39;</span>][inds]</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                mm[k].Quser = mm[0].Quser</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                mm[k].verbose = mm[0].verbose</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                logging.info(<span class="stringliteral">&#39;Object class: &#39;</span> + str(mm[0].participantList[k]))</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                minData = len(inds)</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                mm[k].fname = fnameProto + <span class="stringliteral">&#39;__L&#39;</span> + str(k - 1)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                mm[0].listOfModels.append(mm[k].fname)</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                mm[k].model_type = <span class="stringliteral">&#39;bgplvm&#39;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                Ntr = int(mySAMpy.ratioData * minData / 100)</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                normaliseData = <span class="keyword">True</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                normaliseData = <span class="keyword">False</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                mm[0].listOfModels = []</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                mm[0].fname = fnameProto</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                mm[0].SAMObject.kernelString = <span class="stringliteral">&#39;&#39;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                minData = len(mm[0].L)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                Ntr = int(mySAMpy.ratioData * minData / 100)</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            mm[k].modelLabel = mm[0].participantList[k]</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keywordflow">if</span> mm[0].model_mode != <span class="stringliteral">&#39;temporal&#39;</span>:</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            [Yall, Lall, YtestAll, LtestAll] = mm[k].prepareData(mm[k].model_type, Ntr,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                                                 randSeed=0,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                                                 normalise=normaliseData)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            mm[k].Yall = Yall</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            mm[k].Lall = Lall</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            mm[k].YtestAll = YtestAll</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            mm[k].LtestAll = LtestAll</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">elif</span> mm[0].model_mode == <span class="stringliteral">&#39;temporal&#39;</span>:</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            [Xall, Yall, Lall, XtestAll, YtestAll, LtestAll] = mm[k].prepareData(mm[k].model_type, Ntr,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                                                                 randSeed=0,</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                                                                                 normalise=normaliseData)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            mm[k].Xall = Xall</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            mm[k].Yall = Yall</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            mm[k].Lall = Lall</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            mm[k].XtestAll = XtestAll</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            mm[k].YtestAll = YtestAll</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            mm[k].LtestAll = LtestAll</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        logging.info(<span class="stringliteral">&#39;minData = &#39;</span> + str(minData))</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        logging.info(<span class="stringliteral">&#39;ratioData = &#39;</span> + str(mySAMpy.ratioData))</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    logging.info(<span class="stringliteral">&#39;-------------------------------------------------------------------------------------------------&#39;</span>)</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordflow">if</span> initMode == <span class="stringliteral">&#39;training&#39;</span>:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        samOptimiser.deleteModel(modelPath, <span class="stringliteral">&#39;exp&#39;</span>)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(len(mm[0].participantList)):</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment"># for k = 0 check if multiple model or not</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">if</span> mm[0].participantList[k] != <span class="stringliteral">&#39;root&#39;</span>:</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                logging.info(<span class="stringliteral">&quot;Training with &quot;</span> + str(mm[0].model_num_inducing) + <span class="stringliteral">&#39; inducing points for &#39;</span> +</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                             str(mm[0].model_init_iterations) + <span class="stringliteral">&#39;|&#39;</span> + str(mm[0].model_num_iterations))</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                logging.info(<span class="stringliteral">&quot;Fname:&quot;</span> + str(mm[k].fname))</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                mm[k].training(mm[0].model_num_inducing, mm[0].model_num_iterations,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                               mm[0].model_init_iterations, mm[k].fname, mm[0].save_model,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                               mm[0].economy_save, keepIfPresent=<span class="keyword">False</span>, kernelStr=mm[0].kernelString)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">if</span> mm[0].visualise_output:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                    ax = mm[k].SAMObject.visualise()</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                    visualiseInfo = dict()</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    visualiseInfo[<span class="stringliteral">&#39;ax&#39;</span>] = ax</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    visualiseInfo = <span class="keywordtype">None</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keywordflow">for</span> k <span class="keywordflow">in</span> range(len(mm[0].participantList)):</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="comment"># for k = 0 check if multiple model or not</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> mm[0].participantList[k] != <span class="stringliteral">&#39;root&#39;</span>:</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                logging.info(<span class="stringliteral">&quot;Training with &quot;</span> + str(mm[0].model_num_inducing) + <span class="stringliteral">&#39; inducing points for &#39;</span> +</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                             str(mm[0].model_init_iterations) + <span class="stringliteral">&#39;|&#39;</span> + str(mm[0].model_num_iterations))</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                mm[k].training(mm[0].model_num_inducing, mm[0].model_num_iterations,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                               mm[0].model_init_iterations, mm[k].fname, mm[0].save_model,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                               mm[0].economy_save, keepIfPresent=<span class="keyword">True</span>, kernelStr=mm[0].kernelString)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">return</span> mm</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga27bd9bc8ab5b70ae2f6cc18857afc88c">varianceClass</a>(varianceDirection, x, thresh):</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral">        Utility function to perform threshold or range checking.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="stringliteral">            varianceDirection : List of strings with the conditions to check.</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="stringliteral">            x : The value to be checked.</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">            thresh : The threshold against which x is to be checked given the checks in varianceDirection.</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">            Boolean True or False confirming arg x validates varianceDirection conditions for the threshold.</span></div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga27bd9bc8ab5b70ae2f6cc18857afc88c">  398</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> varianceDirection == [<span class="stringliteral">&#39;greater&#39;</span>, <span class="stringliteral">&#39;smaller&#39;</span>]:</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <span class="keywordflow">return</span> thresh[0] &lt; x &lt; thresh[1]</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">elif</span> varianceDirection == [<span class="stringliteral">&#39;smaller&#39;</span>, <span class="stringliteral">&#39;greater&#39;</span>]:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keywordflow">return</span> thresh[0] &gt; x &gt; thresh[1]</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">elif</span> varianceDirection == [<span class="stringliteral">&#39;greater&#39;</span>]:</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span> x &gt; thresh</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">elif</span> varianceDirection == [<span class="stringliteral">&#39;smaller&#39;</span>]:</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <span class="keywordflow">return</span> x &lt; thresh</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keyword">class </span><a class="code" href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1TimeoutError">TimeoutError</a>(Exception):</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Custom TimeoutError Exception.</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">            Class used to raise TimeoutError Exceptions.</span></div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html">  414</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">pass</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="keyword">class </span>InterruptableThread(threading.Thread):</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Class to launch a function inside of a separate thread.</span></div><div class="line"><a name="l00420"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html">  420</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#a0797d5d722f29957fa9639aee0211e21">__init__</a>(self, func, *args, **kwargs):</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="stringliteral">            Initialise the interruptible thread.</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#a0797d5d722f29957fa9639aee0211e21">  424</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        threading.Thread.__init__(self)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#a316af06b8e7fe0b2265ca5a25291791b">_func</a> = func</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#a9e5f059a3195006de2ea5176988e43f7">_args</a> = args</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#ae866169103e0aea3c2ffca565d1fc6a9">_kwargs</a> = kwargs</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#ae16fb306e904c259ddf40a302b8d5763">_result</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#a1b57a578c33317f182ac877e3b8ecdd7">run</a>(self):</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="stringliteral">            Run the function.</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#a1b57a578c33317f182ac877e3b8ecdd7">  434</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#ae16fb306e904c259ddf40a302b8d5763">_result</a> = self.<a class="code" href="group__icubclient__SAM__utils.html#a316af06b8e7fe0b2265ca5a25291791b">_func</a>(*self.<a class="code" href="group__icubclient__SAM__utils.html#a9e5f059a3195006de2ea5176988e43f7">_args</a>, **self.<a class="code" href="group__icubclient__SAM__utils.html#ae866169103e0aea3c2ffca565d1fc6a9">_kwargs</a>)</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    @property</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#a707acf5e3b465ea2755b2239e5d1b2f6">result</a>(self):</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="stringliteral">            Result of the function.</span></div><div class="line"><a name="l00442"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#a707acf5e3b465ea2755b2239e5d1b2f6">  442</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span> self.<a class="code" href="group__icubclient__SAM__utils.html#ae16fb306e904c259ddf40a302b8d5763">_result</a></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="keyword">class </span><a class="code" href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1timeout">timeout</a>(object):</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="stringliteral">        Class to terminate a function running inside of a separate thread.</span></div><div class="line"><a name="l00449"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html">  449</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#a40209e793998e2d2feea1eb35b8daacc">__init__</a>(self, sec):</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="stringliteral">            Initialise the timeout function.</span></div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#a40209e793998e2d2feea1eb35b8daacc">  453</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        self.<a class="code" href="group__icubclient__SAM__utils.html#a489129cf3a3f780458088ea579571c88">_sec</a> = sec</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#a9019cee778e9c9547f9388927c4e9144">__call__</a>(self, f):</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="stringliteral">            Initialise an interruptible thread and start the thread.</span></div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#a9019cee778e9c9547f9388927c4e9144">  459</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keyword">def </span>wrapped_f(*args, **kwargs):</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            it = <a class="code" href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1InterruptableThread">InterruptableThread</a>(f, *args, **kwargs)</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            it.start()</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            it.join(self.<a class="code" href="group__icubclient__SAM__utils.html#a489129cf3a3f780458088ea579571c88">_sec</a>)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">if</span> <span class="keywordflow">not</span> it.is_alive():</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordflow">return</span> it.result</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            <span class="keywordflow">raise</span> <a class="code" href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1TimeoutError">TimeoutError</a>(<span class="stringliteral">&#39;execution expired&#39;</span>)</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        <span class="keywordflow">return</span> wrapped_f</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga1626d58a716c5b4794ff6f6933011076">plotKnownAndUnknown</a>(varDict, colour, axlist, width=[0.2, 0.2], factor=[(0, 0.6), (0.4, 1)], plotRange=<span class="keyword">False</span>):</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral">        Utility function to plot variances of known and unknown as gaussian distributions.</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral">            varDict : Dictionary containing the mean and variances of known and unknown for different sections of data.</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral">            colour : List of strings with the colours to be used for each plot.</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="stringliteral">            axlist : Plot object to pass in and update.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral">            width : List of floats with the linewidth for the plots.</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">            factor : List of tuples with factors for the plotting of ranges.</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral">            plotRange : Boolean to plot a range together with gaussian distributions or not.</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="stringliteral">            Plot object for the generated plot.</span></div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga1626d58a716c5b4794ff6f6933011076">  484</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    count = 0</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">for</span> k, j <span class="keywordflow">in</span> enumerate(varDict.keys()):</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keywordflow">if</span> len(varDict[j]) &gt; 0 <span class="keywordflow">and</span> <span class="stringliteral">&#39;Results&#39;</span> <span class="keywordflow">not</span> <span class="keywordflow">in</span> j:</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            [mlist, vlist, rlist] = <a class="code" href="group__icubclient__SAM__utils.html#ga82624221423212408df437771ccbd026">meanVar_varianceDistribution</a>(varDict[j])</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            axlist = <a class="code" href="group__icubclient__SAM__utils.html#gaf5214036730562004563e7c122e65998">plotGaussFromList</a>(mlist, vlist, rlist, colour[count], j, width[count], factor[count], axlist, plotRange)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            count += 1</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">return</span> axlist</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#gafede13612da64cc2471be35b385972ed">bhattacharyya_distance</a>(mu1, mu2, var1, var2):</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="stringliteral">        Calculates a measure for the separability of two univariate gaussians.</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="stringliteral">        Returns the bhattacharyya distance that is used to optimise for separability between known and unknown classes when these are modelled as univariate gaussians.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral">            mu1: Float with mean of distribution 1.</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">            mu2: Float with mean of distribution 2.</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="stringliteral">            var1: Float with variance of distribution 1.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="stringliteral">            var2: Float with variance of distribution 2.</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="stringliteral">            Returns a float with the bhattacharyya distance between the two distributions.</span></div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#gafede13612da64cc2471be35b385972ed">  509</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    t1 = float(var1/var2) + float(var2/var1) + 2</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    t2 = np.log(0.25*t1)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    t3 = float(mu1-mu2)*float(mu1-mu2)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    t4 = t3/float(var1+var2)</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">return</span> 0.25*t2 + 0.25*t4</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#gae515125ab69f88f48f48b3eb766927a1">plot_confusion_matrix</a>(cm, targetNames, title=&#39;Confusion matrix&#39;, cmap=plt.cm.inferno):</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Generate and display a confusion matrix.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">        This method plots a formatted confusion matrix from the provided array and target names.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">            cm: Square numpy array containing the values for the confusion matrix.</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">            targetNames: labels for the different classes.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="stringliteral">            title: Title of the plot.</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="stringliteral">            cmap: Matplotlib colourmap for the plot.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="stringliteral">            No return. Blocking call to matplotlib.plot.</span></div><div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#gae515125ab69f88f48f48b3eb766927a1">  531</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    plt.figure()</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    plt.imshow(cm, interpolation=<span class="stringliteral">&#39;nearest&#39;</span>, cmap=cmap)</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    plt.title(title)</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    plt.colorbar()</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    tick_marks = np.arange(len(targetNames))</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    plt.xticks(tick_marks, targetNames, rotation=45)</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    plt.yticks(tick_marks, targetNames)</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    plt.tight_layout()</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    plt.ylabel(<span class="stringliteral">&#39;True label&#39;</span>)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;    plt.xlabel(<span class="stringliteral">&#39;Predicted label&#39;</span>)</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    plt.show(block=<span class="keyword">True</span>)</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#gaf5214036730562004563e7c122e65998">plotGaussFromList</a>(mlist, vlist, rlist, colour, label, width, factor, axlist, plotRange=False):</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="stringliteral">    Plot multiple Gaussians from a list on the same plot.</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="stringliteral">        mlist: List of float means.</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="stringliteral">        vlist: List of float variances.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="stringliteral">        rlist: List of float data ranges.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="stringliteral">        colour: Colour for the plots.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="stringliteral">        label: Label for the plot.</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="stringliteral">        width: Width of line in the plot.</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="stringliteral">        factor: Factor for the height of the ranges to make them more aesthetic.</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="stringliteral">        axlist: List of axes.</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="stringliteral">        plotRange: Boolean to plot ranges or not.</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="stringliteral">        List of axes.</span></div><div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#gaf5214036730562004563e7c122e65998">  562</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    numPlots = len(mlist)</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordflow">if</span> len(axlist) == 0:</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="comment"># f, axlist = plt.subplots(1, numPlots, figsize=(24.0, 15.0))</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        f, axlist = plt.subplots(1, numPlots, figsize=(12.0, 7.5))</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">for</span> k, j <span class="keywordflow">in</span> enumerate(axlist):</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            <span class="keywordflow">if</span> k &lt; numPlots - 2:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                j.set_title(<span class="stringliteral">&#39;D &#39;</span> + str(k), fontsize=20)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            <span class="keywordflow">elif</span> k == numPlots - 2:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                j.set_title(<span class="stringliteral">&#39;Sum&#39;</span>, fontsize=20)</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">elif</span> k &gt; numPlots - 2:</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                j.set_title(<span class="stringliteral">&#39;Mean&#39;</span>, fontsize=20)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            j.set_xticks([])</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            j.set_yticks([])</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(numPlots):</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        sigma = np.sqrt(vlist[j])</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        rangeData = rlist[j][1] - rlist[j][0]</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        x = np.linspace(rlist[j][0] - (rangeData / 2), rlist[j][1] + (rangeData / 2), 100)</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        y = mlab.normpdf(x, mlist[j], sigma)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        axlist[j].plot(x, y, colour, label=label)</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> plotRange:</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            axlist[j].plot([rlist[j][1], rlist[j][1]], [max(y)*factor[0], max(y)*factor[1]], <span class="stringliteral">&#39;--&#39;</span>+colour, linewidth=width)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            axlist[j].plot([rlist[j][0], rlist[j][0]], [max(y)*factor[0], max(y)*factor[1]], <span class="stringliteral">&#39;--&#39;</span>+colour, linewidth=width)</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordflow">return</span> axlist</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#gab49784000971804130fa10c1e3ad817d">solve_intersections</a>(m1, m2, std1, std2):</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="stringliteral">    Solve for the intersection/s of two Gaussian distributions.</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="stringliteral">        m1: Float Mean of Gaussian 1.</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="stringliteral">        m2: Float Mean of Gaussian 2.</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="stringliteral">        std1: Float Standard Deviation of Gaussian 1.</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="stringliteral">        std2: Float Standard Deviation of Gaussian 2.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="stringliteral">        Points of intersection for the two Gaussian distributions.</span></div><div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#gab49784000971804130fa10c1e3ad817d">  603</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    a = 1/(2*std1**2) - 1/(2*std2**2)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    b = m2/(std2**2) - m1/(std1**2)</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    c = m1**2 / (2*std1**2) - m2**2 / (2*std2**2) - np.log(std2/std1)</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordflow">return</span> np.roots([a, b, c])</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga36c10c3281fd9c5aa4aeacacc693ee71">PfromHist</a>(sample, hist, binWidth):</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="stringliteral">    Calulates the probability of a sample from a histogram.</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="stringliteral">        sample : Float with sample to be tested.</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="stringliteral">        hist : Numpy array with normalised histogram probability values.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="stringliteral">        binWidth : Float indicating the width for each probability bin.</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral">        Probability ranging from 0 to 1 for sample with respect to the histogram.</span></div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga36c10c3281fd9c5aa4aeacacc693ee71">  621</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    idx = np.asarray(sample)//binWidth</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    idx = idx.astype(np.int)</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    pList = []</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(len(idx)):</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        pList.append(hist[j][idx[j]])</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keywordflow">return</span> pList</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga82624221423212408df437771ccbd026">meanVar_varianceDistribution</a>(dataList):</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="stringliteral">    Calculate list of means, variances and ranges for the data in the dataList.</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="stringliteral">        dataList: List of numpy arrays containing the data to check.</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="stringliteral">        List of means, list of variances and list of ranges. One for each array in the dataList.</span></div><div class="line"><a name="l00639"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga82624221423212408df437771ccbd026">  639</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    mlist = []</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    vlist = []</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    rlist = []</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    dataArray = np.asarray(dataList)</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> len(dataArray.shape) == 1:</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        dataArray = dataArray[:, <span class="keywordtype">None</span>]</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    numPlots = dataArray.shape[1]</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(numPlots):</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        <span class="comment"># if j &lt; numPlots:</span></div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        h = dataArray[:, j]</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;        <span class="comment"># elif j == numPlots:</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <span class="comment">#     h = np.sum(dataArray, 1)</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="comment"># elif j == numPlots + 1:</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <span class="comment">#     h = np.mean(dataArray, 1)</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        mean = np.mean(h)</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        variance = np.var(h)</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;        rlist.append((min(h), max(h)))</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        mlist.append(mean)</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        vlist.append(variance)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">return</span> mlist, vlist, rlist</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga9f9e9fc5c10660319b4d78dcb1a04d10">bhattacharyya_dict</a>(m, v):</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;<span class="stringliteral">    Calculate bhattacharyya distances for each item in the dictionaries.</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="stringliteral">        m : Dictionary of means.</span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="stringliteral">        v : Dictionary of variances.</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="stringliteral">        List of bhattacharyya distances for the input dictionaries.</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga9f9e9fc5c10660319b4d78dcb1a04d10">  677</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    knownLabel = <span class="keywordtype">None</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    unknownLabel = <span class="keywordtype">None</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    dists = []</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">for</span> j <span class="keywordflow">in</span> m.keys():</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> <span class="stringliteral">&#39;known&#39;</span> == j.lower().split(<span class="stringliteral">&#39; &#39;</span>)[1]:</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            knownLabel = j</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        <span class="keywordflow">elif</span> <span class="stringliteral">&#39;unknown&#39;</span> <span class="keywordflow">in</span> j.lower().split(<span class="stringliteral">&#39; &#39;</span>)[1]:</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            unknownLabel = j</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">if</span> unknownLabel <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> knownLabel <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        numDists = len(m[knownLabel])</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(numDists):</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            dists.append(</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                <a class="code" href="group__icubclient__SAM__utils.html#gafede13612da64cc2471be35b385972ed">bhattacharyya_distance</a>(m[knownLabel][j], m[unknownLabel][j], v[knownLabel][j], v[unknownLabel][j]))</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;        <span class="keywordflow">return</span> dists</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="keywordflow">return</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga993c63ecfc9099d2e2ccd42282354de5">smooth1D</a>(x, window_len=11, window=&#39;hanning&#39;):</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Smooth the data using a window with a requested size.</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral">    This method is based on the convolution of a scaled window with the signal. The signal is prepared by introducing reflected copies of the signal (with the window size) in both ends so that transient parts are minimized in the beginning and end part of the output signal.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="stringliteral">    input:</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">        x: The input signal.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="stringliteral">        window_len: The dimension of the smoothing window; should be an odd integer.</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">        window: The type of window from &#39;flat&#39;, &#39;hanning&#39;, &#39;hamming&#39;, &#39;bartlett&#39;, &#39;blackman&#39; flat window will produce a moving average smoothing.</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral">    output:</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">        The smoothed signal.</span></div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga993c63ecfc9099d2e2ccd42282354de5">  710</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span> x.ndim != 1:</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;smooth only accepts 1 dimension arrays.&quot;</span>)</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> x.size &lt; window_len:</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Input vector needs to be bigger than window size.&quot;</span>)</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> window_len &lt; 3:</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        <span class="keywordflow">return</span> x</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">if</span> window <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&#39;flat&#39;</span>, <span class="stringliteral">&#39;hanning&#39;</span>, <span class="stringliteral">&#39;hamming&#39;</span>, <span class="stringliteral">&#39;bartlett&#39;</span>, <span class="stringliteral">&#39;blackman&#39;</span>]:</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;Window is on of &#39;flat&#39;, &#39;hanning&#39;, &#39;hamming&#39;, &#39;bartlett&#39;, &#39;blackman&#39;&quot;</span>)</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    s = np.r_[x[window_len-1:0:-1], x, x[-1:-window_len:-1]]</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <span class="comment"># logging.info((len(s))</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    <span class="keywordflow">if</span> window == <span class="stringliteral">&#39;flat&#39;</span>:  <span class="comment"># moving average</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        w = np.ones(window_len, <span class="stringliteral">&#39;d&#39;</span>)</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        w = eval(<span class="stringliteral">&#39;np.&#39;</span>+window+<span class="stringliteral">&#39;(window_len)&#39;</span>)</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    y = np.convolve(w/w.sum(), s, mode=<span class="stringliteral">&#39;valid&#39;</span>)</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    off = 0</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> window_len % 2 &gt; 0:</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        off = 1</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keywordflow">return</span> y[(window_len/2-1):-((window_len/2)+off)]</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__utils.html#ga54c327e56dfec748f1c4a150b9180162">transformTimeSeriesToSeq</a>(Y, timeWindow, offset=1, normalised=False, reduced=False, noY=False, doOffset=False):</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment"># TODO add parameter for number of points to skip between sampled windows</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="stringliteral">    Utility function to convert a time series into multiple time windows with additional functionality.</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral">        Y : Time series data.</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral">        timeWindow : Length of the time window.</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="stringliteral">        offset : Number of non-overlapping frames between successive time windows.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral">        normalised : Boolean to normalise time windows with respect to the starting frame.</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="stringliteral">        reduced : Boolean to remove the starting frame if normalisation is enabled since this frame contains 0.</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="stringliteral">        noY : Boolean to return time windows of labels together.</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="stringliteral">        doOffset : In future versions this parameter will enable skipping data points between sampled windows.</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="stringliteral">        X : numpy array of size (numberWindows x lengthOfWindow) containing the time series split up into windows.</span></div><div class="line"><a name="l00755"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__utils.html#ga54c327e56dfec748f1c4a150b9180162">  755</a></span>&#160;<span class="stringliteral">        Y : numpy array of size (numberWindows x lengthOfWindow) containing the labels for each frame in the time series split into windows.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;    Ntr, D = Y.shape</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    <span class="keywordflow">if</span> noY:</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        blocksNumber = (Ntr - timeWindow + 1) // offset</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        blocksNumber = (Ntr - timeWindow) // offset</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    <span class="keywordflow">if</span> normalised <span class="keywordflow">and</span> reduced:</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        X = np.zeros((blocksNumber, (timeWindow - 1) * D))</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        X = np.zeros((blocksNumber, timeWindow * D))</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> <span class="keywordflow">not</span> noY:</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        Ynew = np.zeros((blocksNumber, D))</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        Ynew = <span class="keywordtype">None</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(blocksNumber):</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        base = i * offset</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        tmp = Y[base:base + timeWindow, :].T</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <span class="keywordflow">if</span> normalised:</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            tmp = np.subtract(tmp, tmp[:, 0][:, <span class="keywordtype">None</span>])</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;            <span class="keywordflow">if</span> reduced:</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                tmp = np.delete(tmp, 0, 1)</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        X[i, :] = tmp.flatten().T</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">if</span> <span class="keywordflow">not</span> noY:</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            Ynew[i, :] = Y[base + timeWindow, :]</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">return</span> X, Ynew</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="ttc" id="group__icubclient__SAM__utils_html_a9e5f059a3195006de2ea5176988e43f7"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a9e5f059a3195006de2ea5176988e43f7">SAM.SAM_Core.SAM_utils.InterruptableThread._args</a></div><div class="ttdeci">_args</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00427">SAM_utils.py:427</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_classSAM_1_1SAM__Core_1_1SAM__utils_1_1TimeoutError"><div class="ttname"><a href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1TimeoutError">SAM.SAM_Core.SAM_utils.TimeoutError</a></div><div class="ttdoc">Custom TimeoutError Exception. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00414">SAM_utils.py:414</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a0797d5d722f29957fa9639aee0211e21"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a0797d5d722f29957fa9639aee0211e21">SAM.SAM_Core.SAM_utils.InterruptableThread.__init__</a></div><div class="ttdeci">def __init__(self, func, args, kwargs)</div><div class="ttdoc">Initialise the interruptible thread. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00424">SAM_utils.py:424</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga54c327e56dfec748f1c4a150b9180162"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga54c327e56dfec748f1c4a150b9180162">SAM.SAM_Core.SAM_utils.transformTimeSeriesToSeq</a></div><div class="ttdeci">def transformTimeSeriesToSeq(Y, timeWindow, offset=1, normalised=False, reduced=False, noY=False, doOffset=False)</div><div class="ttdoc">Utility function to convert a time series into multiple time windows with additional functionality...</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00755">SAM_utils.py:755</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a1b57a578c33317f182ac877e3b8ecdd7"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a1b57a578c33317f182ac877e3b8ecdd7">SAM.SAM_Core.SAM_utils.InterruptableThread.run</a></div><div class="ttdeci">def run(self)</div><div class="ttdoc">Run the function. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00434">SAM_utils.py:434</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a40209e793998e2d2feea1eb35b8daacc"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a40209e793998e2d2feea1eb35b8daacc">SAM.SAM_Core.SAM_utils.timeout.__init__</a></div><div class="ttdeci">def __init__(self, sec)</div><div class="ttdoc">Initialise the timeout function. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00453">SAM_utils.py:453</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_gaf5214036730562004563e7c122e65998"><div class="ttname"><a href="group__icubclient__SAM__utils.html#gaf5214036730562004563e7c122e65998">SAM.SAM_Core.SAM_utils.plotGaussFromList</a></div><div class="ttdeci">def plotGaussFromList(mlist, vlist, rlist, colour, label, width, factor, axlist, plotRange=False)</div><div class="ttdoc">Plot multiple Gaussians from a list on the same plot. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00562">SAM_utils.py:562</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_classSAM_1_1SAM__Core_1_1SAM__utils_1_1InterruptableThread"><div class="ttname"><a href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1InterruptableThread">SAM.SAM_Core.SAM_utils.InterruptableThread</a></div><div class="ttdoc">Class to launch a function inside of a separate thread. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00420">SAM_utils.py:420</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga7d1d61b09b614680e853bc0be5e10df1"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga7d1d61b09b614680e853bc0be5e10df1">SAM.SAM_Core.SAM_utils.initialiseModels</a></div><div class="ttdeci">def initialiseModels(argv, update, initMode='training')</div><div class="ttdoc">Initialise SAM Model data structure, training parameters and user parameters. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00059">SAM_utils.py:59</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga27bd9bc8ab5b70ae2f6cc18857afc88c"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga27bd9bc8ab5b70ae2f6cc18857afc88c">SAM.SAM_Core.SAM_utils.varianceClass</a></div><div class="ttdeci">def varianceClass(varianceDirection, x, thresh)</div><div class="ttdoc">Utility function to perform threshold or range checking. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00398">SAM_utils.py:398</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a707acf5e3b465ea2755b2239e5d1b2f6"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a707acf5e3b465ea2755b2239e5d1b2f6">SAM.SAM_Core.SAM_utils.InterruptableThread.result</a></div><div class="ttdeci">def result(self)</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00442">SAM_utils.py:442</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a489129cf3a3f780458088ea579571c88"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a489129cf3a3f780458088ea579571c88">SAM.SAM_Core.SAM_utils.timeout._sec</a></div><div class="ttdeci">_sec</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00454">SAM_utils.py:454</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_gafede13612da64cc2471be35b385972ed"><div class="ttname"><a href="group__icubclient__SAM__utils.html#gafede13612da64cc2471be35b385972ed">SAM.SAM_Core.SAM_utils.bhattacharyya_distance</a></div><div class="ttdeci">def bhattacharyya_distance(mu1, mu2, var1, var2)</div><div class="ttdoc">Calculates a measure for the separability of two univariate gaussians. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00509">SAM_utils.py:509</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ae16fb306e904c259ddf40a302b8d5763"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ae16fb306e904c259ddf40a302b8d5763">SAM.SAM_Core.SAM_utils.InterruptableThread._result</a></div><div class="ttdeci">_result</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00429">SAM_utils.py:429</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a316af06b8e7fe0b2265ca5a25291791b"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a316af06b8e7fe0b2265ca5a25291791b">SAM.SAM_Core.SAM_utils.InterruptableThread._func</a></div><div class="ttdeci">_func</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00426">SAM_utils.py:426</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga36c10c3281fd9c5aa4aeacacc693ee71"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga36c10c3281fd9c5aa4aeacacc693ee71">SAM.SAM_Core.SAM_utils.PfromHist</a></div><div class="ttdeci">def PfromHist(sample, hist, binWidth)</div><div class="ttdoc">Calulates the probability of a sample from a histogram. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00621">SAM_utils.py:621</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga993c63ecfc9099d2e2ccd42282354de5"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga993c63ecfc9099d2e2ccd42282354de5">SAM.SAM_Core.SAM_utils.smooth1D</a></div><div class="ttdeci">def smooth1D(x, window_len=11, window='hanning')</div><div class="ttdoc">Smooth the data using a window with a requested size. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00710">SAM_utils.py:710</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_gab49784000971804130fa10c1e3ad817d"><div class="ttname"><a href="group__icubclient__SAM__utils.html#gab49784000971804130fa10c1e3ad817d">SAM.SAM_Core.SAM_utils.solve_intersections</a></div><div class="ttdeci">def solve_intersections(m1, m2, std1, std2)</div><div class="ttdoc">Solve for the intersection/s of two Gaussian distributions. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00603">SAM_utils.py:603</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga82624221423212408df437771ccbd026"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga82624221423212408df437771ccbd026">SAM.SAM_Core.SAM_utils.meanVar_varianceDistribution</a></div><div class="ttdeci">def meanVar_varianceDistribution(dataList)</div><div class="ttdoc">Calculate list of means, variances and ranges for the data in the dataList. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00639">SAM_utils.py:639</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_classSAM_1_1SAM__Core_1_1SAM__utils_1_1timeout"><div class="ttname"><a href="group__icubclient__SAM__utils.html#classSAM_1_1SAM__Core_1_1SAM__utils_1_1timeout">SAM.SAM_Core.SAM_utils.timeout</a></div><div class="ttdoc">Class to terminate a function running inside of a separate thread. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00449">SAM_utils.py:449</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga9f9e9fc5c10660319b4d78dcb1a04d10"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga9f9e9fc5c10660319b4d78dcb1a04d10">SAM.SAM_Core.SAM_utils.bhattacharyya_dict</a></div><div class="ttdeci">def bhattacharyya_dict(m, v)</div><div class="ttdoc">Calculate bhattacharyya distances for each item in the dictionaries. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00677">SAM_utils.py:677</a></div></div>
<div class="ttc" id="namespaceSAM_1_1SAM__Core_html"><div class="ttname"><a href="namespaceSAM_1_1SAM__Core.html">SAM.SAM_Core</a></div><div class="ttdef"><b>Definition:</b> <a href="SAM__Core_2____init_____8py_source.html#l00001">__init__.py:1</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_gae515125ab69f88f48f48b3eb766927a1"><div class="ttname"><a href="group__icubclient__SAM__utils.html#gae515125ab69f88f48f48b3eb766927a1">SAM.SAM_Core.SAM_utils.plot_confusion_matrix</a></div><div class="ttdeci">def plot_confusion_matrix(cm, targetNames, title='Confusion matrix', cmap=plt.cm.inferno)</div><div class="ttdoc">Generate and display a confusion matrix. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00531">SAM_utils.py:531</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ga1626d58a716c5b4794ff6f6933011076"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ga1626d58a716c5b4794ff6f6933011076">SAM.SAM_Core.SAM_utils.plotKnownAndUnknown</a></div><div class="ttdeci">def plotKnownAndUnknown(varDict, colour, axlist, width=[0.2, factor=[(0, 0.6), plotRange=False)</div><div class="ttdoc">Utility function to plot variances of known and unknown as gaussian distributions. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00484">SAM_utils.py:484</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_ae866169103e0aea3c2ffca565d1fc6a9"><div class="ttname"><a href="group__icubclient__SAM__utils.html#ae866169103e0aea3c2ffca565d1fc6a9">SAM.SAM_Core.SAM_utils.InterruptableThread._kwargs</a></div><div class="ttdeci">_kwargs</div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00428">SAM_utils.py:428</a></div></div>
<div class="ttc" id="group__icubclient__SAM__utils_html_a9019cee778e9c9547f9388927c4e9144"><div class="ttname"><a href="group__icubclient__SAM__utils.html#a9019cee778e9c9547f9388927c4e9144">SAM.SAM_Core.SAM_utils.timeout.__call__</a></div><div class="ttdeci">def __call__(self, f)</div><div class="ttdoc">Initialise an interruptible thread and start the thread. </div><div class="ttdef"><b>Definition:</b> <a href="SAM__utils_8py_source.html#l00459">SAM_utils.py:459</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 19 2020 23:45:26 for icub-client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>icub-client: /home/travis/build/robotology/icub-hri/src/modules/SAM/SAM_Core/SAMCore.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">icub-client
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_ddb4d7e95cc2d6c8e1ade10a20d7247d.html">modules</a></li><li class="navelem"><a class="el" href="dir_c58165d7c2f326e33de0f6c7df0ba009.html">SAM</a></li><li class="navelem"><a class="el" href="dir_453316a4ffa88d6295915dc99dbb1a4e.html">SAM_Core</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SAMCore.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SAMCore_8py.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="namespaceSAM_1_1SAM__Core_1_1SAMCore.html">    1</a></span>&#160;<span class="comment"># &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"># The University of Sheffield</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"># WYSIWYD Project</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"># The core of the Synthetic Autobiographical Memory (SAM) system.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"># The core is built upon Latent Feature Models (LFMs) and implements</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"># cognitive memory properties, such as recall, pattern completion, compression etc.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"># The Core is accompanied by peripherals, currently implemented as Drivers.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"># Drivers facilitate the communication of sensory modalities and the Core.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"># See Driver.py for this.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"># Created:  2015</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"># @authors: Andreas Damianou</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">#</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"># &quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">import</span> GPy</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">import</span> matplotlib.cm <span class="keyword">as</span> cm</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="keyword">import</span> itertools</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">import</span> pylab <span class="keyword">as</span> pb</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="keyword">import</span> cPickle <span class="keyword">as</span> pickle</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">from</span> scipy.spatial <span class="keyword">import</span> distance</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">import</span> operator</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="keyword">import</span> os</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="keyword">class </span><a class="code" href="group__icubclient__SAM__Core.html#classSAM_1_1SAM__Core_1_1SAMCore_1_1LFM">LFM</a>(object):</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="stringliteral">    SAM based on Latent Feature Models.</span></div><div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html">   40</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ac5a497600911dabbeec52f47198662ce">__init__</a>(self):</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="stringliteral">        Initalise the Latent Feature Models.</span></div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ac5a497600911dabbeec52f47198662ce">   44</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">   45</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> = []</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">   46</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = []</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">   47</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a35c00c5bc74b2ff0d93868b9f6d9b888">   48</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a35c00c5bc74b2ff0d93868b9f6d9b888">inputs</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#aa369f33803c3ff76ebee72b875aa5b0c">__num_views</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">   50</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">   51</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">N</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">   52</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">   53</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">   54</a></span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a> = <span class="keywordtype">None</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#aa7ce30e03fc75b4d5b5a49a6ee8c288f">store</a>(self, observed, inputs=None, Q=None, kernel=None, num_inducing=None, init_X=&#39;PCA&#39;):</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Store events.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="stringliteral">            Description:</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="stringliteral">                Read in the args observed and inputs and configure the LFM model for training or recollection.</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="stringliteral">            Args:</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">                observed: An `(N x D)` matrix, where `N` is the number of points and `D` the number of features needed to describe each point.</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="stringliteral">                inputs: A `(N x Q)` matrix, where `Q` is the number of features per input. Leave `&quot;None&quot;` for unsupervised learning.</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="stringliteral">                Q: Leave `None` for supervised learning (`Q` will then be the dimensionality of inputs). Otherwise, specify with an integer `Q` the dimensionality (number of features) for the compressed space that acts as &quot;latent&quot; inputs.</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral">                kernel: For the GP. Can be left as `&quot;None&quot;` for the default kernel.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">                num_inducing: Integer of how many inducing points to use. Inducing points are a fixed number of variables through which all memory is filtered, to achieve full compression. E.g. it can correspond to the number of neurons. This is not absolutely fixed, but it also doesn&#39;t grow necessarily proportionally to the data, since synapses can make more complicated combinations of the existing neurons. The GP is here playing the role of &quot;synapses&quot;, by learning non-linear and rich combinations of the inducing points.</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral">                init_X: Initialisation method for model output. String either `PCA` or `PPCA`. Default= `PCA`. Initialisation uses `PPCA` when `PCA`</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="stringliteral">            Returns:</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="stringliteral">                None</span></div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#aa7ce30e03fc75b4d5b5a49a6ee8c288f">   72</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        assert(isinstance(observed, dict))</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a> = observed</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#aa369f33803c3ff76ebee72b875aa5b0c">__num_views</a> = len(self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>.keys())</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a> = Q</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="comment"># self.D = observed.shape[1]</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">N</a> = observed[observed.keys()[0]].shape[0]</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a> = num_inducing</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        <span class="keywordflow">if</span> num_inducing <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a> = self.<a class="code" href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">N</a></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        <span class="keywordflow">if</span> inputs <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a> <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a> = 2  <span class="comment"># self.D</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#aa369f33803c3ff76ebee72b875aa5b0c">__num_views</a> == 1:</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                assert(self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == [] <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>)</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> = <span class="stringliteral">&#39;bgplvm&#39;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                assert(self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == [] <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>)</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> = <span class="stringliteral">&#39;mrd&#39;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            assert(self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == [] <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>)</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            assert(self.<a class="code" href="group__icubclient__SAM__Core.html#aa369f33803c3ff76ebee72b875aa5b0c">__num_views</a> == 1)</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a> = inputs.shape[1]</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> = <span class="stringliteral">&#39;gp&#39;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a35c00c5bc74b2ff0d93868b9f6d9b888">inputs</a> = inputs</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">if</span> kernel <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            kernel = GPy.kern.RBF(self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, ARD=<span class="keyword">True</span>) + GPy.kern.Bias(self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>) + GPy.kern.White(self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            </div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            Ytmp = self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>[self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>.keys()[0]]</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            pcaFailed = <span class="keyword">False</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">if</span> init_X == <span class="stringliteral">&#39;PCA&#39;</span>:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">try</span>:</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = GPy.models.BayesianGPLVM(Ytmp, self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, kernel=kernel, num_inducing=self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a>)</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">except</span> ValueError:</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    pcaFailed = <span class="keyword">True</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Initialisation with PCA failed. Initialising with PPCA...&quot;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">elif</span> init_X == <span class="stringliteral">&#39;PPCA&#39;</span> <span class="keywordflow">or</span> pcaFailed:</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&quot;Initialising with PPCA...&quot;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                Xr = GPy.util.linalg.ppca(Ytmp, self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, 2000)[0]</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                Xr -= Xr.mean(0)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                Xr /= Xr.std(0)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = GPy.models.BayesianGPLVM(Ytmp, self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, kernel=kernel, num_inducing=self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a>, X=Xr)</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>[<span class="stringliteral">&#39;.*noise&#39;</span>] = Ytmp.var() / 100.</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="comment"># Create a list of observation spaces (aka views)</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a> = []</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a> = []</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            <span class="keywordflow">for</span> k <span class="keywordflow">in</span> self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>.keys():</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a> = [self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>, self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>[k]]</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a> = [self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a>, k]</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>[0] = self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>[0][1]</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a>[0] = self.<a class="code" href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">namesList</a>[0][1]</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            pcaFailed = <span class="keyword">False</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            <span class="keywordflow">if</span> init_X == <span class="stringliteral">&#39;PCA&#39;</span>:</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="keywordflow">try</span>:</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = GPy.models.MRD(self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>, input_dim=self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, num_inducing=self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a>,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                kernel=kernel, initx=<span class="stringliteral">&quot;PCA_single&quot;</span>, initz=<span class="stringliteral">&#39;permute&#39;</span>)</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="keywordflow">except</span> ValueError:</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    pcaFailed = <span class="keyword">True</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    <span class="keywordflow">print</span> <span class="stringliteral">&quot;Initialisation with PCA failed. Initialising with PPCA...&quot;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">elif</span> init_X == <span class="stringliteral">&#39;PPCA&#39;</span> <span class="keywordflow">or</span> pcaFailed:</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="keywordflow">print</span> <span class="stringliteral">&quot;Initialising with PPCA...&quot;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <span class="keyword">from</span> GPy.util.initialization <span class="keyword">import</span> initialize_latent</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                Xr = np.zeros((self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>[0].shape[0], self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>))</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="keywordflow">for</span> qs, Y <span class="keywordflow">in</span> zip(np.array_split(np.arange(self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>), len(self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>)), self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>):</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <span class="keywordflow">try</span>:</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        x, frcs = initialize_latent(<span class="stringliteral">&#39;PCA&#39;</span>, len(qs), Y)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    <span class="keywordflow">except</span> ValueError:</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        x = GPy.util.linalg.ppca(Y, len(qs), 2000)[0]</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    Xr[:, qs] = x</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                Xr -= Xr.mean()</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                Xr /= Xr.std()</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = GPy.models.MRD(self.<a class="code" href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">Ylist</a>, input_dim=self.<a class="code" href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">Q</a>, num_inducing=self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a>, kernel=kernel, initx=<span class="stringliteral">&quot;PCA_single&quot;</span>, initz=<span class="stringliteral">&#39;permute&#39;</span>, X=Xr)</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>[<span class="stringliteral">&#39;.*noise&#39;</span>] = [yy.var() / 100. <span class="keywordflow">for</span> yy <span class="keywordflow">in</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Ylist]</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>:</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a> = GPy.models.SparseGPRegression(self.<a class="code" href="group__icubclient__SAM__Core.html#a35c00c5bc74b2ff0d93868b9f6d9b888">inputs</a>, self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>[self.<a class="code" href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">observed</a>.keys()[0]], kernel=kernel, num_inducing=self.<a class="code" href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">num_inducing</a>)</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels = <span class="keywordtype">None</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.textLabelPts = dict()</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment"># def _init_latents():</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">#    from GPy.util.initialization import initialize_latent</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">#    X, fracs = initialize_latent(init, input_dim, Y)</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#a679cfd0b1085a4acc55efa2f5651ef39">add_labels</a>(self, labels):</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Add labels to observations.</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="stringliteral">            If observables are associated with labels, they can be added here. Labels has to be a matrix of size N x K, where K is the total number of different labels. If e.g. the i-th row of L is [1 0 0] (or [1 -1 -1]) then this means that there are K=3 different classes and the i-th row of the observables belongs to the first class.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral">            labels: list of strings containing the labels for the observations</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00169"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a679cfd0b1085a4acc55efa2f5651ef39">  169</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">if</span> len(labels.shape) == 1 <span class="keywordflow">or</span> labels.shape[1] == 1:</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels = labels</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Warning: labels assumed to be in 1-of-K encoding!&quot;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels = np.argmax(labels, 1)[:, <span class="keywordtype">None</span>]</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#aec85189808d132eab55a5230f595051d">learn</a>(self, optimizer=&#39;bfgs&#39;, max_iters=1000, init_iters=300, verbose=True):</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">        Learn the model (analogous to &quot;forming synapses&quot; after perceiving data).</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">            optimizer: String with the requested optimiser taken from a the list of available scipy optimisers.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="stringliteral">            max_iters: Integer with the maximum number of training iterations for the second phase of training the model.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">            init_iters: Integer with the maximum number of training iterations for the first phase of training.</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">            verbose: Boolean to turn logging to stdout on or off.</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#aec85189808d132eab55a5230f595051d">  188</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span> <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>[<span class="stringliteral">&#39;.*noise&#39;</span>].fix()</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.optimize(optimizer, messages=verbose, max_iters=init_iters)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>[<span class="stringliteral">&#39;.*noise&#39;</span>].unfix()</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>[<span class="stringliteral">&#39;.*noise&#39;</span>].constrain_positive()</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        </div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.optimize(optimizer, messages=verbose, max_iters=max_iters)</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        self.<a class="code" href="group__icubclient__SAM__Core.html#a45d705cd21e288151677a313f1f35418">check_snr</a>()</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keywordflow">for</span> j <span class="keywordflow">in</span> list(np.unique(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels)):</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.textLabelPts[j] = [l <span class="keywordflow">for</span> l, k <span class="keywordflow">in</span> enumerate(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels) <span class="keywordflow">if</span> k[0] == j]</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#a45d705cd21e288151677a313f1f35418">check_snr</a>(self, warningEnable=True, messages=True):</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Checks the signal to noise ratio(SNR) of the trained model.</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">            Provides an indicator of successful learning by looking at the variance distribution of the model.</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">            warningEnable: Boolean to switch warnings on or off in the case of a low SNR.</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">            messages: Boolean to turn output to stdout on or off.</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a45d705cd21e288151677a313f1f35418">  212</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            snr = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Y.var()/self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Gaussian_noise.variance.values[0]</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span> messages:</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                print(<span class="stringliteral">&#39;# SNR: &#39;</span> + str(snr))</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span> warningEnable <span class="keywordflow">and</span> snr &lt; 8:</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                print(<span class="stringliteral">&#39; WARNING! SNR is small!&#39;</span>)</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            snr = []</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms)):</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                snr.append(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[i].Y.var()/self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[i].Gaussian_noise.variance.values[0])</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="keywordflow">if</span> messages:</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    print(<span class="stringliteral">&#39;# SNR view &#39;</span> + str(i) + <span class="stringliteral">&#39;: &#39;</span> + str(snr[-1]))</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="keywordflow">if</span> warningEnable <span class="keywordflow">and</span> snr[-1] &lt; 8:</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    print(<span class="stringliteral">&#39; WARNING! SNR for view &#39;</span> + str(i) + <span class="stringliteral">&#39; is small!!&#39;</span>)</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            snr = <span class="keywordtype">None</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> snr</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        </div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#afa85fe0230d0040053b45c92baed00c4">visualise</a>(self, which_indices=None, plot_scales=True):</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">        Show the internal representation of the memory.</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">            Creates a 2D plot showing the mean and variance distribution of the model.</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">            which_indices: Tuple of two integers that specify which indices of the `Q` indices that make up the model are to be plotted.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">            plot_scales: Boolean to switch scale labelling on or off in the plots.</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00245"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#afa85fe0230d0040053b45c92baed00c4">  245</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="comment"># if self.type == &#39;bgplvm&#39; and which_indices is None:</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">#    which_indices = most_significant_input_dimensions(self.model,None)</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="comment"># if self.type == &#39;mrd&#39; and which_indices is None:</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        <span class="comment">#    # Assume that labels modality is always the last one!!</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">#    which_indices = most_significant_input_dimensions(self.model.bgplvms[-1],None)</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span> <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                ret = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.plot_latent(labels=self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.data_labels, which_indices=which_indices)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                ret = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.plot_latent(which_indices=which_indices)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>:</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            ret = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.plot()</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span> <span class="keywordflow">and</span> plot_scales:</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            ret2 = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.plot_scales()</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="comment"># if self.type == &#39;mrd&#39;:</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">#    ret1 = self.model.X.plot(&quot;Latent Space 1D&quot;)</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="comment">#    ret2 = self.model.plot_scales(&quot;MRD Scales&quot;)</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        </div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">return</span> ret</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#adf56eff4d79e3253dd095bcad6ddcf14">visualise_interactive</a>(self, dimensions=(20, 28), transpose=<span class="keyword">True</span>, order=<span class="stringliteral">&#39;F&#39;</span>, invert=<span class="keyword">False</span>, scale=<span class="keyword">False</span>,</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                              colorgray=<span class="keyword">True</span>, view=0, which_indices=(0, 1)):</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Interactive plot of the model.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">            Show the internal representation of the memory and allow the user to interact with it to map samples/points from the compressed space to the original output space.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">            dimensions: Tuple of integers describing the dimensions that the image needs to be transposed to for display.</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">            transpose: Boolean whether to transpose the image before display.</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">            order: Boolean whether array is in Fortan ordering (&#39;F&#39;) or Python ordering (&#39;C&#39;).</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">            invert: Boolean whether to invert the pixels or not.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral">            scale: Boolean whether to scale the image or not.</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">            colorgray: Boolean whether to plot in grayscale or not.</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">            view: Integer in the case of MRD models which describes the view to be plotted.</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral">            which_indices: Tuple of two integers that specify which indices of the `Q` indices that make up the model are to be plotted.</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#adf56eff4d79e3253dd095bcad6ddcf14">  286</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            ax = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.plot_latent(which_indices)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            y = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Y[0, :]</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <span class="comment"># dirty code here</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="keywordflow">if</span> colorgray:</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                data_show = GPy.plotting.matplot_dep.visualize.image_show(y[<span class="keywordtype">None</span>, :], dimensions=dimensions, transpose=transpose, order=order, invert=invert, scale=scale, cmap = cm.Greys_r)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                data_show = GPy.plotting.matplot_dep.visualize.image_show(y[<span class="keywordtype">None</span>, :], dimensions=dimensions, transpose=transpose, order=order, invert=invert, scale=scale)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;            lvm = GPy.plotting.matplot_dep.visualize.lvm(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.X.mean[0, :].copy(), self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>, data_show, ax)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            raw_input(<span class="stringliteral">&#39;Press enter to finish&#39;</span>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="stringliteral">            NOT TESTED!!!</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="stringliteral">            &quot;&quot;&quot;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            ax = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view].plot_latent(which_indices)</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            y = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view].Y[0, :]</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            <span class="comment"># dirty code here</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            <span class="keywordflow">if</span> colorgray:</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                data_show = GPy.plotting.matplot_dep.visualize.image_show(y[<span class="keywordtype">None</span>, :], dimensions=dimensions, transpose=transpose, order=order, invert=invert, scale=scale, cmap = cm.Greys_r)</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                data_show = GPy.plotting.matplot_dep.visualize.image_show(y[<span class="keywordtype">None</span>, :], dimensions=dimensions, transpose=transpose, order=order, invert=invert, scale=scale)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            lvm = GPy.plotting.matplot_dep.visualize.lvm(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view].X.mean[0, :].copy(), self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view], data_show, ax)</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            raw_input(<span class="stringliteral">&#39;Press enter to finish&#39;</span>)</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#a2062b06580e32b119f134994ecc756d9">recall</a>(self, locations):</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="stringliteral">        Recall stored events.</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="stringliteral">            This is closely related to performing pattern pattern_completion but given &quot;training&quot; data.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="stringliteral">             locations: Integer which is the index of the stored event.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="stringliteral">            A `(Dx1)` numpy array containing the data of a training point as reconstructed by the model.</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a2062b06580e32b119f134994ecc756d9">  324</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">if</span> locations == -1:</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            locations = range(self.<a class="code" href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">N</a>)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span> <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>:</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Y[locations, :].values</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">return</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[0].Y[locations, :].values</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#afce62b1291617041c68233cc0e74bce6">pattern_completion</a>(self, test_data, view=0, verbose=False, visualiseInfo=None, optimise=100):</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Recall novel events</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="stringliteral">            In the case of supervised learning, pattern completion means that we give new inputs and infer their corresponding outputs. In the case of unsupervised learning, pattern completion means that we give new outputs and we infer their corresponding &quot;latent&quot; inputs, ie the internal compressed representation of the new outputs in terms of the already formed &quot;synapses&quot;.</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="stringliteral">            test_data : A `(Dx1)` numpy array containing the feature vector for which you would like to obtain the closest neighbour.</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="stringliteral">            view : Integer which is the index for the view of the MRD model that will be used for pattern completion.</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="stringliteral">            verbose : Boolean switching logging to stdout on and off.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="stringliteral">            visualiseInfo: Plot object returned by visualiseInfo. If present, plot the location of the pattern completed point. If none, no plotting.</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="stringliteral">            optimise : Integer number of optimisation iterations when performing pattern completion.</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="stringliteral">            A `(Qx1)` numpy array with the predicted mean, a `(Qx1)` numpy array with the predicted variance, a plot object with plotted point and an inference object returned by optimiser.</span></div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#afce62b1291617041c68233cc0e74bce6">  347</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="comment"># tmp = self.model.infer_newX(test_data)[0]</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="comment"># pred_mean = tmp.mean</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            <span class="comment"># pred_variance = tmp.variance #np.zeros(pred_mean.shape)</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            tmp = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.infer_newX(test_data, optimize=<span class="keyword">False</span>)[1]</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="keywordflow">if</span> optimise != 0:</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                tmp.optimize(max_iters=optimise, messages=verbose)</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            pred_mean = tmp.X.mean</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            pred_variance = tmp.X.variance</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            tmp = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view].infer_newX(test_data, optimize=<span class="keyword">False</span>)[1]</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> optimise != 0:</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                tmp.optimize(max_iters=optimise, messages=verbose)</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            pred_mean = tmp.X.mean</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            pred_variance = tmp.X.variance</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            tmp = []</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            pred_mean, pred_variance = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.predict(test_data)</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span> <span class="keywordflow">or</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>) <span class="keywordflow">and</span> visualiseInfo <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            ax = visualiseInfo[<span class="stringliteral">&#39;ax&#39;</span>]</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            inds0, inds1 = <a class="code" href="group__icubclient__SAM__Core.html#ga28b70c1cda2c0787dd3728b4e39a55a1">most_significant_input_dimensions</a>(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>, <span class="keywordtype">None</span>)</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            pp = ax.plot(pred_mean[:, inds0], pred_mean[:, inds1], <span class="stringliteral">&#39;om&#39;</span>, markersize=11, mew=11)</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            pb.draw()</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            pp = <span class="keywordtype">None</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        </div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keywordflow">return</span> pred_mean, pred_variance, pp, tmp</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ac7a83c12364fdedd0786cbbfa370d913">pattern_completion_inference</a>(self, y, target_modality=-1):</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Pattern completion wrapper.</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="stringliteral">            1) First, we do normal pattern completion, where given an output y, out map to the memory space to get a test memory x*.</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="stringliteral">            2) Now the test memory x* is compared with stored memories. This allows us to infer the label of x*. If the labels are given in another modality (by default in the last one), then we return the label from that modality (careful, The encoding might be 1-of-K, e.g. -1 1 -1 -&gt; 2 and also noise might exist). Instead, if the labels are not given in another modality (completely unsupervised learning), then we just return the index to the most similar training memory.</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="stringliteral">            y : A `(Dx1)` numpy array containing the feature vector for which you would like to obtain the closest neighbour.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="stringliteral">            target_modality : Integer which is the index for the view of the MRD model that will be used for pattern completion.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="stringliteral">            Inference object returned by optimiser containing multi-dimensional mean and variance of nearest neighbour.</span></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ac7a83c12364fdedd0786cbbfa370d913">  390</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="comment"># Returns the predictive mean, the predictive variance and the axis (pp) of the latent space backwards mapping.            </span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        ret = self.<a class="code" href="group__icubclient__SAM__Core.html#afce62b1291617041c68233cc0e74bce6">pattern_completion</a>(y)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        mm = ret[0]</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        post = ret[3]        </div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="comment"># find nearest neighbour of mm and model.X</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        dists = np.zeros((self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.X.shape[0], 1))</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(dists.shape[0]):</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            dists[j, :] = distance.euclidean(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.X.mean[j, :], mm[0].values)</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        nn, min_value = min(enumerate(dists), key=operator.itemgetter(1))</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            ret = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[target_modality].Y[nn, :]</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            ret = nn  <span class="comment"># self.model.data_labels[nn]</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <span class="keywordflow">return</span> ret</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#a8b7f765623ba4d691b54de19128f7641">fantasy_memory</a>(self, X, view=0):</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Generating novel outputs.</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">            The opposite of pattern completion. Instead of finding a memory from an output, here we find an output from a (possibly fantasy) memory. Here, fantasy memory is a memory not existing in the training set, found by interpolating or sampling in the memory space.</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral">            X: A `(Qx1)` numpy array with the location of the `Q` dimensional model that is to be generated.</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">            view: Integer which is the index for the view of the MRD model that will be used to generate the fantasy_memory.</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="stringliteral">            A `(Qx1)` numpy array with the predicted mean and a `(Qx1)` numpy array with the predicted variance.</span></div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#a8b7f765623ba4d691b54de19128f7641">  418</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            pred_mean, pred_variance = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[view].predict(X)</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            pred_mean, pred_variance = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.predict(X)</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;gp&#39;</span>:</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            pred_mean, pred_variance = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.predict(X)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <span class="keywordflow">return</span> pred_mean, pred_variance</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ac5377f7dff06afcc7c9b6340dd7fdf73">familiarity</a>(self, Ytest, ytrmean=None, ytrstd=None, optimise=100):</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;Familiarity testing.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="stringliteral">            This function tests the familiarity/similarity of an input with the inputs used to train the model.</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="stringliteral">            Ytest : A `(Dx1)` numpy array whose familiarity/similarity is tested with trained outputs of the model.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="stringliteral">            ytrmean : A `(Dx1)` numpy array with the mean of the training inputs.</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="stringliteral">            ytrstd :  A `(Dx1)` numpy array with the variance of the training inputs.</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="stringliteral">            optimise : Integer number of optimisation iterations when performing pattern completion.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">            A float with a measure of familiarity for Ytest with the current model.</span></div><div class="line"><a name="l00441"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ac5377f7dff06afcc7c9b6340dd7fdf73">  441</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        assert(self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        N = Ytest.shape[0]</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keywordflow">if</span> ytrmean <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span>:</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            Ytest -= ytrmean</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            Ytest /= ytrstd</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keyword">from</span> <a class="code" href="namespaceSAM_1_1SAM__Core_1_1svi__ratio.html">SAM.SAM_Core.svi_ratio</a> <span class="keyword">import</span> SVI_Ratio</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        s = <a class="code" href="group__icubclient__SAM__Core.html#classSAM_1_1SAM__Core_1_1svi__ratio_1_1SVI__Ratio">SVI_Ratio</a>()</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        _, _, _, qX = self.<a class="code" href="group__icubclient__SAM__Core.html#afce62b1291617041c68233cc0e74bce6">pattern_completion</a>(Ytest, verbose=<span class="keyword">False</span>, optimise=optimise)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        qX = qX.X</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        ll = 0</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(N):</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            ll += s.inference(self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.kern, qX[i, :][<span class="keywordtype">None</span>, :], self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.Z, self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.likelihood,</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                              Ytest[i, :][<span class="keywordtype">None</span>, :], self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.posterior)[0]</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        ll /= N</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        <span class="keywordflow">return</span> ll</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ad55ab0d5f2e3552e0217bd86daf45ced">__get_latent__</a>(self):</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <span class="stringliteral">&quot;&quot;&quot; Return number of latent dimensions.</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="stringliteral">            Description:</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="stringliteral">                Convenience function to return the number of latent dimensions.</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="stringliteral">            Args:</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral">                None.</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="stringliteral">            Returns:</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral">                Integer with the number of latent dimensions of the model.</span></div><div class="line"><a name="l00472"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ad55ab0d5f2e3552e0217bd86daf45ced">  472</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        <span class="keywordflow">if</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;bgplvm&#39;</span>:</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            numLatentDimensions = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.X.mean</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;        <span class="keywordflow">elif</span> self.<a class="code" href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">type</a> == <span class="stringliteral">&#39;mrd&#39;</span>:</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            numLatentDimensions = self.<a class="code" href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">model</a>.bgplvms[0].X.mean</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <span class="keywordflow">else</span>:</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            print(<span class="stringliteral">&#39;No latent space for this type of model.&#39;</span>)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            numLatentDimensions = <span class="keywordtype">None</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span> numLatentDimensions</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ga9ce969892128bc69c859146c6ba19b47">save_model</a>(mm, fileName=&#39;m_serialized.txt&#39;):</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="stringliteral">&quot;&quot;&quot; Save serialised model.</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="stringliteral">            mm : Model object to save.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="stringliteral">            fileName : String with the filename of saved model.</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="stringliteral">            None</span></div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ga9ce969892128bc69c859146c6ba19b47">  492</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="comment">#mPruned = mm.getstate() # TODO (store less stuff)</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    output = open(fileName, <span class="stringliteral">&#39;wb&#39;</span>)</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">#pickle.dump(mPruned, output)</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    pickle.dump(mm, output)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    output.close()</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#gaccf785120f296a32b2b811e80b9bf455">load_model</a>(fileName=&#39;m_serialized.txt&#39;):</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="stringliteral">&quot;&quot;&quot; Load serialised model.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="stringliteral">            fileName : String with the filename of model to load.</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="stringliteral">            SAMObject Model</span></div><div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#gaccf785120f296a32b2b811e80b9bf455">  507</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    mm = pickle.load(open(fileName, <span class="stringliteral">&#39;r&#39;))</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="stringliteral">    </span><span class="keywordflow">return</span> mm</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#gae32d9cee31703fea1899ee5cc876e949">save_pruned_model</a>(mm, fileName=&#39;m_pruned&#39;, economy=False, extraDict=dict()):</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Save a pruned model</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="stringliteral">    Description:</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="stringliteral">            Save a trained model after pruning things that are not needed to be stored. Economy set to `True` will trigger a storing which creates much smaller files. See the load_pruned_model discussion on what this means in terms of restrictions.</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="stringliteral">        mm : Model object to save.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="stringliteral">        fileName : String with the filename of saved model.</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="stringliteral">        economy : Boolean to enable or disable economy saving.</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="stringliteral">        extraDict : Dictionary with parameters that are requested to be saved which are not in the default saved parameters but are required when loading the model for interaction.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="stringliteral">        None</span></div><div class="line"><a name="l00526"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#gae32d9cee31703fea1899ee5cc876e949">  526</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    SAMObjPruned=dict()</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;type&#39;</span>] = mm.type</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">if</span> mm.model:</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        SAMObjPruned[<span class="stringliteral">&#39;textLabelPts&#39;</span>] = mm.model.textLabelPts</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="comment"># SAMObjPruned[&#39;observed&#39;] = mm.observed # REMOVE</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="comment"># SAMObjPruned[&#39;inputs&#39;] = mm.inputs</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">#    SAMObjPruned[&#39;__num_views&#39;] = mm.__num_views</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;__num_views&#39;</span>] = <span class="keywordtype">None</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;Q&#39;</span>] = mm.Q</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;N&#39;</span>] = mm.N</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;num_inducing&#39;</span>] = mm.num_inducing</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;namesList&#39;</span>] = mm.namesList</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    SAMObjPruned[<span class="stringliteral">&#39;kernelString&#39;</span>] = mm.kernelString</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    SAMObjPruned.update(extraDict)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment"># if economy:</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="comment">#     SAMObjPruned[&#39;modelPath&#39;] = fileName + &#39;_model.h5&#39;</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="comment">#     #if file exists delete</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="comment">#     if(os.path.isfile(SAMObjPruned[&#39;modelPath&#39;])):</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="comment">#         os.remove(SAMObjPruned[&#39;modelPath&#39;])</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="comment">#     mm.model.save(SAMObjPruned[&#39;modelPath&#39;])</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment"># else:</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="comment">#     SAMObjPruned[&#39;modelPath&#39;] = fileName + &#39;_model.pickle&#39;</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    <span class="comment">#     mm.model.pickle(SAMObjPruned[&#39;modelPath&#39;])</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    folderPath = os.path.join(<span class="stringliteral">&#39;/&#39;</span>, *fileName.split(<span class="stringliteral">&#39;/&#39;</span>)[:-1])</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    fileName = fileName.split(<span class="stringliteral">&#39;/&#39;</span>)[-1]</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> economy:</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;        SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>] = fileName + <span class="stringliteral">&#39;_model.h5&#39;</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="comment"># if file exists delete</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">if</span> os.path.isfile(os.path.join(folderPath, SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>])):</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            os.remove(os.path.join(folderPath, SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>]))</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <span class="keywordflow">if</span> mm.model:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            mm.model.save(os.path.join(folderPath, SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>]))</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>] = fileName + <span class="stringliteral">&#39;_model.pickle&#39;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        mm.model.pickle(os.path.join(folderPath, SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>]))</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    output = open(os.path.join(folderPath, fileName) + <span class="stringliteral">&#39;.pickle&#39;</span>, <span class="stringliteral">&#39;wb&#39;</span>)</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    pickle.dump(SAMObjPruned, output)</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    output.close()</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ga4ee9fba2f044889dbaff106b25dacd69">load_pruned_model</a>(fileName=&#39;m_pruned&#39;, economy=False, m=None):</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Load a pruned model</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="stringliteral">        Description:</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="stringliteral">            Load a trained model. If economy is set to `True`, then a not-None initial model m is needed. This model needs to be created exactly as the one that was saved (so, it is demo specific!) and in this case calling the present function will set its parameters (meaning that you still need to create a model but don&#39;t need to optimize it).</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="stringliteral">        Args:</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="stringliteral">            fileName : String with the filename of the model to load.</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="stringliteral">            economy : Boolean to indicate whether an economy object is being loaded or not.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="stringliteral">            m : Model object into which the data to be loaded is to be stored in. If left at `None` model will be loaded into a default model initialisation.</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="stringliteral">        Returns:</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="stringliteral">            SAMObject model</span></div><div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ga4ee9fba2f044889dbaff106b25dacd69">  583</a></span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    folderPath = os.path.join(<span class="stringliteral">&#39;/&#39;</span>, *fileName.split(<span class="stringliteral">&#39;/&#39;</span>)[:-1])</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    SAMObjPruned = pickle.load(open(fileName + <span class="stringliteral">&#39;.pickle&#39;</span>, <span class="stringliteral">&#39;rb&#39;</span>))</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    SAMObject = <a class="code" href="group__icubclient__SAM__Core.html#classSAM_1_1SAM__Core_1_1SAMCore_1_1LFM">LFM</a>()</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordflow">if</span> economy:</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keyword">assert</span> m <span class="keywordflow">is</span> <span class="keywordflow">not</span> <span class="keywordtype">None</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keyword">import</span> tables</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        f = tables.open_file(os.path.join(fileName+<span class="stringliteral">&#39;_model.h5&#39;</span>), <span class="stringliteral">&#39;r&#39;)</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="stringliteral">        m.param_array[:] = f.root.param_array[:]</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="stringliteral">        f.close()</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="stringliteral">        m._trigger_params_changed()</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="stringliteral">        SAMObject.model = m</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="stringliteral">    </span><span class="keywordflow">else</span>:</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        with open(SAMObjPruned[<span class="stringliteral">&#39;modelPath&#39;</span>], <span class="stringliteral">&#39;rb&#39;</span>) <span class="keyword">as</span> f:</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">print</span> <span class="stringliteral">&quot;Loading file: &quot;</span> + str(f)</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            SAMObject.model = pickle.load(f)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment"># TODO: The following is supposed to update the model, but maybe not. Change...</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <span class="comment"># LB get error here using MRD</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <span class="comment"># SAMObject.model.update_toggle()</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="comment"># SAMObject.model.update_toggle()</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    </div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    SAMObject.type = SAMObjPruned[<span class="stringliteral">&#39;type&#39;</span>] </div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="comment"># SAMObject.observed = SAMObjPruned[&#39;observed&#39;] </span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="comment"># SAMObject.inputs = SAMObjPruned[&#39;inputs&#39;]</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    SAMObject.model.textLabelPts = SAMObjPruned[<span class="stringliteral">&#39;textLabelPts&#39;</span>]</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    SAMObject.__num_views = SAMObjPruned[<span class="stringliteral">&#39;__num_views&#39;</span>] </div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    SAMObject.Q = SAMObjPruned[<span class="stringliteral">&#39;Q&#39;</span>] </div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    SAMObject.N = SAMObjPruned[<span class="stringliteral">&#39;N&#39;</span>] </div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    SAMObject.num_inducing = SAMObjPruned[<span class="stringliteral">&#39;num_inducing&#39;</span>] </div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    SAMObject.namesList = SAMObjPruned[<span class="stringliteral">&#39;namesList&#39;</span>]</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">return</span> SAMObject</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="keyword">def </span><a class="code" href="group__icubclient__SAM__Core.html#ga28b70c1cda2c0787dd3728b4e39a55a1">most_significant_input_dimensions</a>(model):</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="stringliteral">&quot;&quot;&quot; Determine the most descriptive output dimensions.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="stringliteral">    Description:</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="stringliteral">        Helper function to determine which dimensions should be plotted based on the relevance weights.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="stringliteral">    Args:</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="stringliteral">        model: Model object to be assessed.</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="stringliteral">    Returns:</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="stringliteral">        Integer indicating the most descriptive dimension and an integer indicating the second most descriptive dimension.</span></div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="group__icubclient__SAM__Core.html#ga28b70c1cda2c0787dd3728b4e39a55a1">  628</a></span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> model.input_dim == 1:</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        input_1 = 0</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        input_2 = <span class="keywordtype">None</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">if</span> model.input_dim == 2:</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        input_1, input_2 = 0, 1</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">try</span>:</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            input_1, input_2 = np.argsort(model.input_sensitivity())[::-1][:2]</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <span class="keywordflow">except</span>:</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">raise</span> ValueError(<span class="stringliteral">&quot;cannot automatically determine which dimensions to plot, please pass &#39;which_indices&#39;&quot;</span>)</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">return</span> input_1, input_2</div><div class="ttc" id="group__icubclient__SAM__Core_html_a45d705cd21e288151677a313f1f35418"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a45d705cd21e288151677a313f1f35418">SAM.SAM_Core.SAMCore.LFM.check_snr</a></div><div class="ttdeci">def check_snr(self, warningEnable=True, messages=True)</div><div class="ttdoc">Checks the signal to noise ratio(SNR) of the trained model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00212">SAMCore.py:212</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a7c151a43617675bbd42c596eda8c7c36"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a7c151a43617675bbd42c596eda8c7c36">SAM.SAM_Core.SAMCore.LFM.model</a></div><div class="ttdeci">model</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00046">SAMCore.py:46</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a91e1c157cd5fdb4d9ded80ea536f7db1"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a91e1c157cd5fdb4d9ded80ea536f7db1">SAM.SAM_Core.SAMCore.LFM.type</a></div><div class="ttdeci">type</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00045">SAMCore.py:45</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a679cfd0b1085a4acc55efa2f5651ef39"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a679cfd0b1085a4acc55efa2f5651ef39">SAM.SAM_Core.SAMCore.LFM.add_labels</a></div><div class="ttdeci">def add_labels(self, labels)</div><div class="ttdoc">Add labels to observations. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00169">SAMCore.py:169</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_classSAM_1_1SAM__Core_1_1svi__ratio_1_1SVI__Ratio"><div class="ttname"><a href="group__icubclient__SAM__Core.html#classSAM_1_1SAM__Core_1_1svi__ratio_1_1SVI__Ratio">SAM.SAM_Core.svi_ratio.SVI_Ratio</a></div><div class="ttdoc">Inference the marginal likelihood through {p(y,y*)}{p(y)}. </div><div class="ttdef"><b>Definition:</b> <a href="svi__ratio_8py_source.html#l00023">svi_ratio.py:23</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_af743fbe6f09bdf3ef27cf270330b8364"><div class="ttname"><a href="group__icubclient__SAM__Core.html#af743fbe6f09bdf3ef27cf270330b8364">SAM.SAM_Core.SAMCore.LFM.Ylist</a></div><div class="ttdeci">Ylist</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00054">SAMCore.py:54</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a35c00c5bc74b2ff0d93868b9f6d9b888"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a35c00c5bc74b2ff0d93868b9f6d9b888">SAM.SAM_Core.SAMCore.LFM.inputs</a></div><div class="ttdeci">inputs</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00048">SAMCore.py:48</a></div></div>
<div class="ttc" id="namespaceSAM_1_1SAM__Core_1_1svi__ratio_html"><div class="ttname"><a href="namespaceSAM_1_1SAM__Core_1_1svi__ratio.html">SAM.SAM_Core.svi_ratio</a></div><div class="ttdef"><b>Definition:</b> <a href="svi__ratio_8py_source.html#l00001">svi_ratio.py:1</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ga28b70c1cda2c0787dd3728b4e39a55a1"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ga28b70c1cda2c0787dd3728b4e39a55a1">SAM.SAM_Core.SAMCore.most_significant_input_dimensions</a></div><div class="ttdeci">def most_significant_input_dimensions(model)</div><div class="ttdoc">Determine the most descriptive output dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00628">SAMCore.py:628</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_gae32d9cee31703fea1899ee5cc876e949"><div class="ttname"><a href="group__icubclient__SAM__Core.html#gae32d9cee31703fea1899ee5cc876e949">SAM.SAM_Core.SAMCore.save_pruned_model</a></div><div class="ttdeci">def save_pruned_model(mm, fileName='m_pruned', economy=False, extraDict=dict())</div><div class="ttdoc">Save a pruned model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00526">SAMCore.py:526</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_afce62b1291617041c68233cc0e74bce6"><div class="ttname"><a href="group__icubclient__SAM__Core.html#afce62b1291617041c68233cc0e74bce6">SAM.SAM_Core.SAMCore.LFM.pattern_completion</a></div><div class="ttdeci">def pattern_completion(self, test_data, view=0, verbose=False, visualiseInfo=None, optimise=100)</div><div class="ttdoc">Recall novel events. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00347">SAMCore.py:347</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ad55ab0d5f2e3552e0217bd86daf45ced"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ad55ab0d5f2e3552e0217bd86daf45ced">SAM.SAM_Core.SAMCore.LFM.__get_latent__</a></div><div class="ttdeci">def __get_latent__(self)</div><div class="ttdoc">Return number of latent dimensions. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00472">SAMCore.py:472</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_addd9a08eac90755cd3d4d3cf173ebcdf"><div class="ttname"><a href="group__icubclient__SAM__Core.html#addd9a08eac90755cd3d4d3cf173ebcdf">SAM.SAM_Core.SAMCore.LFM.num_inducing</a></div><div class="ttdeci">num_inducing</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00052">SAMCore.py:52</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a2344a60b868b875934f74c352072f502"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a2344a60b868b875934f74c352072f502">SAM.SAM_Core.SAMCore.LFM.namesList</a></div><div class="ttdeci">namesList</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00053">SAMCore.py:53</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a2062b06580e32b119f134994ecc756d9"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a2062b06580e32b119f134994ecc756d9">SAM.SAM_Core.SAMCore.LFM.recall</a></div><div class="ttdeci">def recall(self, locations)</div><div class="ttdoc">Recall stored events. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00324">SAMCore.py:324</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_af1dab4180e10fe444420a60a7eed48ba"><div class="ttname"><a href="group__icubclient__SAM__Core.html#af1dab4180e10fe444420a60a7eed48ba">SAM.SAM_Core.SAMCore.LFM.N</a></div><div class="ttdeci">N</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00051">SAMCore.py:51</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_gaccf785120f296a32b2b811e80b9bf455"><div class="ttname"><a href="group__icubclient__SAM__Core.html#gaccf785120f296a32b2b811e80b9bf455">SAM.SAM_Core.SAMCore.load_model</a></div><div class="ttdeci">def load_model(fileName='m_serialized.txt')</div><div class="ttdoc">Load serialised model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00507">SAMCore.py:507</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_aa369f33803c3ff76ebee72b875aa5b0c"><div class="ttname"><a href="group__icubclient__SAM__Core.html#aa369f33803c3ff76ebee72b875aa5b0c">SAM.SAM_Core.SAMCore.LFM.__num_views</a></div><div class="ttdeci">__num_views</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00049">SAMCore.py:49</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ga4ee9fba2f044889dbaff106b25dacd69"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ga4ee9fba2f044889dbaff106b25dacd69">SAM.SAM_Core.SAMCore.load_pruned_model</a></div><div class="ttdeci">def load_pruned_model(fileName='m_pruned', economy=False, m=None)</div><div class="ttdoc">Load a pruned model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00583">SAMCore.py:583</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_afa85fe0230d0040053b45c92baed00c4"><div class="ttname"><a href="group__icubclient__SAM__Core.html#afa85fe0230d0040053b45c92baed00c4">SAM.SAM_Core.SAMCore.LFM.visualise</a></div><div class="ttdeci">def visualise(self, which_indices=None, plot_scales=True)</div><div class="ttdoc">Show the internal representation of the memory. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00245">SAMCore.py:245</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_adf56eff4d79e3253dd095bcad6ddcf14"><div class="ttname"><a href="group__icubclient__SAM__Core.html#adf56eff4d79e3253dd095bcad6ddcf14">SAM.SAM_Core.SAMCore.LFM.visualise_interactive</a></div><div class="ttdeci">def visualise_interactive(self, dimensions=(20, 28), transpose=True, order='F', invert=False, scale=False, colorgray=True, view=0, which_indices=(0, 1))</div><div class="ttdoc">Interactive plot of the model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00286">SAMCore.py:286</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ga9ce969892128bc69c859146c6ba19b47"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ga9ce969892128bc69c859146c6ba19b47">SAM.SAM_Core.SAMCore.save_model</a></div><div class="ttdeci">def save_model(mm, fileName='m_serialized.txt')</div><div class="ttdoc">Save serialised model. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00492">SAMCore.py:492</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ac7a83c12364fdedd0786cbbfa370d913"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ac7a83c12364fdedd0786cbbfa370d913">SAM.SAM_Core.SAMCore.LFM.pattern_completion_inference</a></div><div class="ttdeci">def pattern_completion_inference(self, y, target_modality=-1)</div><div class="ttdoc">Pattern completion wrapper. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00390">SAMCore.py:390</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_a8b7f765623ba4d691b54de19128f7641"><div class="ttname"><a href="group__icubclient__SAM__Core.html#a8b7f765623ba4d691b54de19128f7641">SAM.SAM_Core.SAMCore.LFM.fantasy_memory</a></div><div class="ttdeci">def fantasy_memory(self, X, view=0)</div><div class="ttdoc">Generating novel outputs. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00418">SAMCore.py:418</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ac5a497600911dabbeec52f47198662ce"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ac5a497600911dabbeec52f47198662ce">SAM.SAM_Core.SAMCore.LFM.__init__</a></div><div class="ttdeci">def __init__(self)</div><div class="ttdoc">Initalise the Latent Feature Models. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00044">SAMCore.py:44</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ac5377f7dff06afcc7c9b6340dd7fdf73"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ac5377f7dff06afcc7c9b6340dd7fdf73">SAM.SAM_Core.SAMCore.LFM.familiarity</a></div><div class="ttdeci">def familiarity(self, Ytest, ytrmean=None, ytrstd=None, optimise=100)</div><div class="ttdoc">Familiarity testing. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00441">SAMCore.py:441</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_adc719c2f2f24d23fb8dc2368c711d6b2"><div class="ttname"><a href="group__icubclient__SAM__Core.html#adc719c2f2f24d23fb8dc2368c711d6b2">SAM.SAM_Core.SAMCore.LFM.Q</a></div><div class="ttdeci">Q</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00050">SAMCore.py:50</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_ace2526a537a5af0d3609a022f32d380b"><div class="ttname"><a href="group__icubclient__SAM__Core.html#ace2526a537a5af0d3609a022f32d380b">SAM.SAM_Core.SAMCore.LFM.observed</a></div><div class="ttdeci">observed</div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00047">SAMCore.py:47</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_classSAM_1_1SAM__Core_1_1SAMCore_1_1LFM"><div class="ttname"><a href="group__icubclient__SAM__Core.html#classSAM_1_1SAM__Core_1_1SAMCore_1_1LFM">SAM.SAM_Core.SAMCore.LFM</a></div><div class="ttdoc">SAM based on Latent Feature Models. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00040">SAMCore.py:40</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_aa7ce30e03fc75b4d5b5a49a6ee8c288f"><div class="ttname"><a href="group__icubclient__SAM__Core.html#aa7ce30e03fc75b4d5b5a49a6ee8c288f">SAM.SAM_Core.SAMCore.LFM.store</a></div><div class="ttdeci">def store(self, observed, inputs=None, Q=None, kernel=None, num_inducing=None, init_X='PCA')</div><div class="ttdoc">Store events. </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00072">SAMCore.py:72</a></div></div>
<div class="ttc" id="group__icubclient__SAM__Core_html_aec85189808d132eab55a5230f595051d"><div class="ttname"><a href="group__icubclient__SAM__Core.html#aec85189808d132eab55a5230f595051d">SAM.SAM_Core.SAMCore.LFM.learn</a></div><div class="ttdeci">def learn(self, optimizer='bfgs', max_iters=1000, init_iters=300, verbose=True)</div><div class="ttdoc">Learn the model (analogous to &quot;forming synapses&quot; after perceiving data). </div><div class="ttdef"><b>Definition:</b> <a href="SAMCore_8py_source.html#l00188">SAMCore.py:188</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 19 2020 23:45:26 for icub-client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
